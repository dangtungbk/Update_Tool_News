<!DOCTYPE html>
<html>

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-120640070-3"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-120640070-3');
    </script>

    <!-- Global site tag (gtag.js) - Google Ads: 995439836 -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=AW-995439836"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'AW-995439836');
    </script>
    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5PK6DQ8');</script>
    <!-- End Google Tag Manager -->
    <script>
        window.addEventListener('load', function (event) {
            // 회원가입 버튼 클릭 (영어)
            if (window.location.href.indexOf('users/registerGlobal') > -1) {
                if (document.querySelector("input[check_result='success']") != null &&
                    document.querySelector("#pwd1").value !== "" &&
                    document.querySelector("#pwd2").value !== "") {
                    document.querySelector("#submitRegister")?.addEventListener("click", function () {
                        window.dataLayer = window.dataLayer || [];
                    window.dataLayer.push({ 'event': 'signup_event' });
                    });
                }
            }
     
            // 회원가입 버튼 클릭 (한국어)
            if (window.location.href == 'https://www.wemakevoice.com/users/register') {
                if (document.querySelector("input[check_result='success']") != null &&
                    document.querySelector("#pwd1").value !== "" &&
                    document.querySelector("#pwd2").value !== "") {
                    document.querySelector("#submitRegisterBefore")?.addEventListener("click", function () {
                        window.dataLayer = window.dataLayer || [];
                    window.dataLayer.push({ 'event': 'signup_event' });
                    });
                }
            }
            
            
            // 음성 다운로드 버튼
            if (document.querySelector("#userEmail").innerText.trim() !== "" &&
                document.querySelector("#userEmail").innerText.trim() !== null &&
                document.querySelector("#userEmail").innerText.trim() !== "Language") {
                document.querySelector("#downVoice")?.addEventListener("click", function () {
                    gtag('event', 'conversion', {
                        'send_to': 'AW-995439836/lu5ECK2zrLADENzp1NoD'
                    });
                });
            }
        });
     </script>

<!-- Global site tag - Google Adsense -->
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-6321835618242910"
crossorigin="anonymous"></script>

    <!-- Event snippet for Website traffic (1) conversion page -->
    <script>
        gtag('event', 'conversion', { 'send_to': 'AW-995439836/iP7VCPu6tM4BENzp1NoD' });
    </script>

    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <title>
        enter text and download mp3
    </title>
    <link rel="canonical" href="https://www.wemakevoice.com">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description"
        content="we make voice(위메이크보이스)는 성우의 음성을 클릭한번으로 MP3파일을 제작합니다. 고품질 TTS기술을 활용한 음성파일을 만들세요." />
    <meta name="author" content="WEMAKEVOICE" />

    <!-- Google Font -->
    <!-- <link href="https://fonts.googleapis.com/css?family=Nanum+Myeongjo:400,700&display=swap" rel="stylesheet">-->
    <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&display=swap" rel="stylesheet"> 

    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.1/css/all.css"
        integrity="sha384-v8BU367qNbs/aIZIxuivaU55N5GPF89WBerHoGA4QTcbUjYiLQtKdrfXnqAcXyTv" crossorigin="anonymous">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.1/css/font-awesome.min.css" rel="stylesheet" />

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
        integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <!-- 파비콘 삽입 -->
    <link rel="shortcut icon" type="image/png" href="../img/favicon_2.ico" />

    <!-- CSS 삽입 -->
    <link rel="stylesheet" href="../css/styles.css">

    <!-- CSS 삽입 -->
    <link
    rel="stylesheet"
    href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
  />


    <!-- 네이버 소유자 확인 -->
    <meta name="naver-site-verification" content="09cc159265ece24095546a3960ff140841230796" />

    <!-- 오픈그래프 -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="위메이크 보이스 음성파일 제작">
    <meta property="og:description" content="딥러닝을 이용한 TTS음성을 MP3파일로 제작할 수 있습니다.">
    <meta property="og:image" content="../img/logo_wemakevoice.png">
    <meta property="og:url" content="https://www.wemakevoice.com">
    <meta name="twitter:card" content="summary">
    <meta name="twitter:title" content="위메이크 보이스 음성파일 제작">
    <meta name="twitter:description" content="딥러닝을 이용한 TTS음성을 MP3파일로 제작할 수 있습니다.">
    <meta name="twitter:image" content="../img/logo_wemakevoice.png">
    <meta name="twitter:domain" content="위메이크보이스">

    <!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5PK6DQ8');</script>
    <!-- End Google Tag Manager -->


</head>

<body id="bootstrap-overrides" >

    <header>
        <div class="alert alert-dismissible fade show top-alert fixed-bottom mb-0" role="alert" id="top-alert"
            style="display:none;">
            <a href="/users/registerTerms" class="text-white" style="text-decoration: none;" id="top-alert-close">
                <div class="container">
                    <!-- <span style="color: rgb(255, 228, 76); "></span> -->
                    &nbsp;&nbsp;[Event] If you get started &nbsp;<span style="color: rgb(255, 76, 76); "><i
                                class="fas fa-coins"></i>&nbsp; <strong>1,000 Credit</strong></span>
                         For Free | 230 Character Voice MP3 Download Free
                            <button class="btn btn-danger btn-sm float-right" type="button">
                                Get the benefits ＞
                            </button>
                            <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                </div>
            </a>
        </div>

        <!-- class="fixed-top" 아래서 뺏다-->
        <nav class="navbar fixed-top navbar-expand-lg navbar-toggleable-sm navbar-light bg-white border-bottom box-shadow mb-3"
            id="navbar-main">

            <div class="container-fluid">
                <a class="mainLogoImage" href="/">
                    <img class="mainLogo" src="../img/wemakevoice-logo.jpg" width="50px" style="margin-right: 10px;" />
                </a>
                <a class="navbar-brand top-logo-font" href="/" style="margin-right:3rem;"> 
                    we make voice
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target=".navbar-collapse"
                    aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarSupportedContent">
                    <ul class="navbar-nav" >
                        <!--아나운서 서비스는 lang 이 ko 일 때만 표시-->
                        
                            <li class="nav-item active navbar-collapse" id="gnb">
                                <div class="dropdown">
                                    <a class="nav-link dropdown-toggle text-dark textSmall" href="#" id="navbarDropdown"
                                        role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        Voice MP3
                                    </a>
                                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                        <a class="dropdown-item" href="/freetts">
                                            <span class="badge badge-dark">&nbsp;&nbsp;&nbsp;&nbsp;Free&nbsp;&nbsp;&nbsp;</span>&nbsp; Free User 
                                        </a>
                                        <a class="dropdown-item" href="/mp3down">
                                            <span class="badge" style="background-color: #c1a46d ; color:black">Member</span>&nbsp; Membership User 
                                        </a>
                                    </div>
                                </div>
                            </li>
                            <!-- 무료 페이지 추가시 삭제 by minki.son 2022.01.07 -->
                            <!--
                            <li class="nav-item active navbar-collapse">
                                <a class="nav-link text-dark textSmall" href="/freetts">
                                    Free MP3
                                </a>
                            </li>
                            <li class="nav-item active navbar-collapse">
                                <a class="nav-link text-dark textSmall" href="/mp3Down">
                                    Voice MP3
                                </a>
                            </li>
                            -->
                            <li class="nav-item active navbar-collapse">
                                <a class="nav-link text-dark textSmall" href="/announcement">
                                    Announcement
                                </a>
                            </li>


                            <li class="nav-item active navbar-collapse" id="gnb">
                                <div class="dropdown">
                                    <a class="nav-link dropdown-toggle text-dark textSmall" href="#" id="navbarDropdown"
                                        role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        Pricing Plan
                                    </a>
                                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                                        <a class="dropdown-item" href="/priceMp3down">
                                            Voice MP3
                                        </a>
                                        <a class="dropdown-item" href="/priceAnnounce">
                                            Announcement
                                        </a>
                                    </div>
                                </div>
                            </li>

                            <!--한국어 이외의 언어설정에서는 음성 MP3 만 다운되도록 함-->
                            

                                    <!-- 임시 방편 -->
                                    <!-- <form method="get" action="/ko">
                                            <input type="submit" value="한국어"/>
                                        </form>
                                        <form method="get" action="/en">
                                            <input type="submit" value="영어"/>
                                        </form> -->
                                   



                                    <!-- <li class="nav-item active navbar-collapse" id="gnb">
                                        <a class="nav-link text-dark textSmall" href="/customerservice">
                                            Customer service
                                        </a>
                                    </li> -->
                                    <li class="nav-item active navbar-collapse" id="gnb">
                                            <a class="nav-link text-dark textSmall" href="/customerservice">
                                                Customer service
                                        </a>
                                    </li>
                    </ul>
                    



                            
                                <ul class="navbar-nav ml-auto">
                                    <li class="nav-item active">
                                        <a class="nav-link text-dark textSmall" href="/users/login">
                                            Sign in
                                        </a>
                                    </li>

                                    
                                        <li class="nav-item active">
                                            <a class="nav-link text-dark textSmall" href="/users/registerTerms">
                                                Sign up
                                            </a>
                                        </li>
                                        
                                    <li class="nav-item active navbar-collapse" id="gnb">
                                        <div class="dropdown">
                                            <button class="btn textFocus btn-sm dropdown-toggle" style="border-width: 0;"
                                                type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true"
                                                aria-expanded="false">
                                                <span id="userEmail">Language</span>
                                            </button>
                                            <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                                                <a class="dropdown-item" href="/ko">한국어</a>
                                                <a class="dropdown-item" href="/en">English</a>
                                            </div>
                                        </div>
                                    </li> 
                                </ul>
                                
                                      
                </div>
            </div>
        </nav>
    </header>    

    <div id ="aside-free" class="aside-free-bottom">멤버십 전용</div>

    
    <!--좌우 공백 두는 컨테이너 시작-->
    <section id="mainInputBox_Member">
        <div class="container-fluid col-12 pad-1 inputtextbox mx-auto myform form" style="max-width: 80%; padding-top: 3rem; margin: 10px auto; ">
            <!-- 상위 제목 표시 -->
            <div class="row mt-5" style="padding: 0 0 0 0; margin-top: 5rem; margin-bottom: 1rem;">
                <div class="col-sm-3 selectBox" data-toggle="tooltip" data-placement="top"
                    title="Please choose a language." style="align-self:flex-end;">
                    <h6 class="text-center"
                        style="margin-bottom:0;background-color:#343a40;color:white; padding: 3px 0px;border: 1px solid black; border-bottom: 0;">
                        Select Language
                    </h6>
                    <!-- <img src='../img/silver.png' width='25'/> -->
                    <select id="langSelect" class="custom-select  border90 form-control"
                        style="font-size: 1.5rem; font-weight: bold; text-align-last:center; border:1px solid black; ">

                        <option value="Arabic">Arabic · عربي</option>
                        <option value="Bulgarian">Bulgarian · Bulgarian</option>
                        <option value="Catalan">Catalan · Catalan</option>
                        <option value="Chinese">Chinese · Chinese</option>
                        <!-- <option value="Mandarin">Mandarin · Mandarin</option> -->
                        <!-- <option value="Cantonese">Cantonese · Cantonese</option> -->
                        <option value="Croatian">Croatian · Croatian</option>
                        <option value="Czech">Czech · Czech</option>
                        <option value="Danish">Danish · Danish</option>
                        <option value="Dutch">Dutch · Dutch</option>
                        <option value="English">English · English</option>
                        <option value="Estonian">Estonian · Estonian</option>
                        <option value="Finnish">Finnish · Finnish</option>
                        <option value="Filipino">Filipino · Filipino</option>
                        <option value="French">French · Français</option>
                        <option value="German">German · Deutsch</option>
                        <option value="Greek">Greek · Greek</option>
                        <option value="Gujarati">Gujarati · Gujarati</option>
                        <option value="Hebrew">Hebrew · Hebrew</option>
                        <option value="Hindi">Hindi · Hindi</option>
                        <option value="Hungarian">Hungarian · Hungarian</option>
                        <option value="Icelandic">Icelandic · Icelandic</option>
                        <option value="Indonesian">Indonesian · Indonesia</option>
                        <option value="Irish">Irish · Irish</option>
                        <option value="Italian">Italian · Italiano</option>
                        <option value="Japanese">Japanese · 日本語</option>
                        <option value="Korean" selected>Korean · 한국어 </option>
                        <option value="Latvian">Latvian · Latvian</option>
                        <option value="Lithuanian">Lithuanian · Lithuanian</option>
                        <option value="Malay">Malay · Malay</option>
                        <option value="Maltese">Maltese · Maltese</option>
                        <option value="Marathi">Marathi · Marathi</option>
                        <option value="Norwegian">Norwegian · Norwegian</option>
                        <option value="Polish">Polish · Polish</option>
                        <option value="Portuguese">Portuguese · Português</option>
                        <option value="Romanian">Romanian · Romanian</option>
                        <option value="Russian">Russian · Ρусский</option>
                        <option value="Slovak">Slovak · Slovak</option>
                        <option value="Slovenian">Slovenian · Slovenian</option>
                        <option value="Spanish">Spanish · Español</option>
                        <option value="Swahili">Swahili · Swahili</option>
                        <option value="Swedish">Swedish · Swedish</option>
                        <option value="Tamil">Tamil · Tamil</option>
                        <option value="Taiwanese">Taiwanese · Taiwanese</option>
                        <option value="Telugu">Telugu · Telugu</option>
                        <option value="Thai">Thai · Thai</option>
                        <option value="Turkish">Turkish · Türkçe</option>
                        <option value="Ukrainian">Ukrainian · Ukrainian</option>
                        <option value="Urdu">Urdu · Urdu</option>
                        <option value="Vietnamese">Vietnamese · Tiếng Việt</option>
                        <option value="Welsh">Welsh · Welsh</option>
                    </select>
                </div>
                <div class="col-sm-9" style="padding:20px 15px 0px;">
                    <!-- <div class="row" style="padding-left:15px; height: 60px;"> -->
                    <div class="row" style="padding-left:15px;">

                        <!-- 속도 조절 -->
                        <div id="controlSpeed" class="col-sm-2 mobile-speed-range text-center range-padding" >
                            <label id="speedLabel" class="custom-range-slider range"  style="display:inline-block" >
                                <!-- <input id="speedRange"  type="range" max="20" min="0" value="0" onchange="speedRangeChange()"> -->
                                <input id="speedRange"  type="range" max="10" min="-10" value="0" onchange="speedRangeChange()" data-toggle="tooltip"
                                data-placement="left" title="Control the speed of voice." >
                            </label>
                            <span class="float-left range-text">
                                Slow
                            </span>&nbsp;
                            <span class="float-right range-text">
                                Fast
                            </span>
                            <!-- <form class="customizing" style="vertical-align: middle;" data-toggle="tooltip"
                                data-placement="top" title="Control the speed of voice.">
                                <input type="range" class="custom-range" name="points" min="0" max="20" id="speedRange"
                                    style="width: 100%;" list="tickmarks" onchange="speedRangeChange()">
                            </form> -->
                        </div>

                        <div id="notControlSpeed" class="col-sm-2"></div>

                        <!-- 톤조절 -->
                        <div id="controlPitch" class="col-sm-2 mobile-speed-range text-center range-padding"
                            style="margin: 0px 0px; padding:0 5px;" >
                         
                            <!-- <form class="customizing" style=" vertical-align: middle;" >
                                <input type="range" class="custom-range" name="points" min="-5" max="5" id="pitchRange"
                                    style="width: 100%; height: 1px;"  list="tickmarks" onchange="pitchRangeChange()">
                                   </form> -->

                            <label id="pitchLabel" class="custom-range-slider range" >
                                <input id="pitchRange"  type="range" max="5" min="-5" value="0" onchange="pitchRangeChange()" data-toggle="tooltip"
                                data-placement="left" title="Adjusting the tone of the voice">
                            </label>
                            <span class="float-left range-text">
                                Low
                            </span>&nbsp;
                            <span class="float-right range-text">
                                High
                            </span>

                        </div>
                        <div id="notControlPicth" class="col-sm-2"></div>

                        <!-- 볼륨 조절 -->
                        <div id="controlVolume" class="col-sm-2 mobile-speed-range text-center range-padding"
                            style="margin: 0px 0px 0px 0px; padding:0 5px;">
                            <label id="volumeLabel" class="custom-range-slider range" >
                                <input id="volumeRange"  type="range" max="5" min="-5" value="0" onchange="volumeRangeChange()" data-toggle="tooltip"
                                data-placement="left" title="Adjust the volume.">
                            </label>
                            <span class="float-left range-text">
                                Quietly
                            </span>&nbsp;
                            <span class="float-right range-text">
                                Loudly
                            </span>
                            <!-- <form class="customizing" style=" vertical-align: middle;" data-toggle="tooltip"
                                data-placement="top" title="Adjust the volume.">
                                <input type="range" class="custom-range" name="points" min="-5" max="5" id="volumeRange"
                                    style="width: 100%;" list="ticks" onchange="volumeRangeChange()">
                            </form> -->
                         
                        </div>
                        <div id="notControlVolume" class="col-sm-2"></div>


                        <!-- 샘플 오디오(숨김) -->
                        <audio id="sampleAudio"
                            src="https://wemakevoice.s3.ap-northeast-2.amazonaws.com/sampleVoice/%ED%95%9C%EA%B5%AD%EC%96%B4/%EA%B0%95%ED%83%9C%ED%95%98.mp3"
                            controls="controls" hidden></audio>

                        <!-- 띄워읽기 기능 -->
                        <div id="spaceRead" class="col-sm-4 text-right" style="align-self:flex-end; ">
                            <div id="breakTimeSet" style="color: rgb(156, 156, 156);">
                                <span class="btn btn-sm border90  btn-dark mobile-spaceClick" onclick="autoSpace()"
                                    style=" padding:3.7px 10px; align-self:flex-end" data-toggle="tooltip"
                                    data-placement="top" title="Add break time to the period &amp; question mark.">
                                    commit all
                                </span>
                                <span class="btn btn-sm btn-dark border90  mobile-spaceClick"
                                    style="padding:1.7px 5px; display: inline-block;" data-toggle="tooltip"
                                    data-placement="top" title="Add break time">
                                    <!-- &nbsp; &nbsp;+  -->
                                    <div style="display: inline-block; ">
                                        <div style="display: inline-block; ">
                                            <button type="button" class="btn-dark btn-sm" data-quantity="minus"
                                                data-field="quantity" style="border:0; padding:2px;">
                                                <i class="fa fa-minus" aria-hidden="true" style="color: white;"></i>
                                            </button>
                                        </div>
                                        <input id="tempStopSecond" type="number" class="text-center" name="quantity"
                                            value="0.5"
                                            style="width: 2rem; display:inline-block; background-color: #343a40; color:white; border:0px">
                                        <div style="display: inline-block;">
                                            <button type="button" class="btn-dark  btn-sm" data-quantity="plus"
                                                data-field="quantity" style="border:0; padding:2px;">
                                                <i class="fa fa-plus" aria-hidden="true" style="color: white;"></i>
                                            </button>
                                        </div>
                                    </div>
                                    <span id="tempStop" class="btn"
                                        style="color: white;display: inline-block; font-size: 0.9rem; padding-bottom:8px; line-height: 0;">
                                        sec Pause
                                    </span>
                                </span>
                            </div>
                        </div>

                        <!-- 드래그 부분 미리듣기 -->
                        <div id="dragListenCol" class="col-sm-2">
                            <button type="button" id="justListenBtn" onclick="dragListen()"
                                class="btn btn-dark border90 btn-sm btn-responsive btn-block" data-toggle="tooltip"
                                data-placement="top" title="Drag some part you want to listen. Then you can listen it. ">
                                <i class="fas fa-volume-mute" id="dragListenIcon"></i>
                                Part Play <span style="font-size: 0.2rem; font-style: italic;"></span>
                                    <!-- <i class="fas fa-copyright" style="font-size: 0.9rem;"></i>&nbsp;<span
                            id="listenCredit" style="font-size: 0.9rem;"></span> -->
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row " style="height:700px;">
                <!-- 음성 선택 선택박스 -->
                <div class="col-sm-3 selectBox">
                    <div class="form-group ">
                        <select id="selectBox" size="26" name="lang" class="voiceboxMember border90 form-control "
                            onchange="sampleVoiceChange(value, 'second')" onclick="forFewVoice(value)" onkeydown="keyDown(event)">
                        </select>
                    </div>
                </div>
                <!-- 텍스트 박스  onkeypress="onTestChange()"-->
                <div class="col-sm-9" id="text-col">
                    <!-- <div style="background-color:#464646; height:3px;"></div> -->
                    <div class="form-group" style="margin-bottom:0.2rem;">
                        <!-- onmouseup="cutTextLength()" -->
                        <textarea type="text" class="form-control rounded-lg border90" rows="18" name="text"
                            id="textEntry" autocomplete="off" placeholder="■ Useful tips\n\n① Please use period(.) comma(,) spacing.\n② You can make the voice file using the above option. (slow/fast speed, high/low pitch)\n③ If you want some pause, Click sec Pause button on the right. Only available on a few voices"
                            onmouseup="cutTextLength()" style="border:1px solid black; height:617px; "
                            onkeydown="keyDown(event)" ></textarea>
                            <!--이사항이 오류가 나있었음 onkeydown="keyDown(event)" ondragstart="return false" ondrop="return false"></textarea> -->
                            
                    </div>
                    <div class="form-group mx-auto text-right row" style="margin:0!important;">
                        <!-- 글자수 -->
                        <div id="textCounter" class="float-left"
                            style="padding-left:0px; font-size: 1rem; color: #9c9c9c;">###</div>
                        <!-- 잔여글자수 -->
                        <div id="balanceText" style="padding-left: 3px; font-size: 1rem; color: rgb(156, 156, 156);">
                        </div>
                        <!-- 잔여 드래그듣기 -->
                        <div id="balanceDragListen"
                            style="padding-left: 3px; font-size: 1rem; color: rgb(156, 156, 156);"></div>
                        <div id="selectStyleDiv" style="padding-left: 3px; font-size: 1rem; color: rgb(156, 156, 156);">
                            |
                            <select id="selectStyle" class="form-select form-select-sm"
                                style="border:0; font-weight: bold;" aria-label=".form-select-sm example"
                                onchange="styleSelected(value)">
                            </select>

                        </div>
                        <!-- <span id="warningVoice"  style="padding-left: 10px; font-size: 1rem; color: rgb(156, 156, 156);" >| [특이사항] 해당음성 마침표 기준 한 문장 최대 글자수 : 200자</span> -->
                        <!-- 미리듣기 음성 오디오바 controlsList="nodownload"-->

                        <!-- 내용자동삭제 -->
                        <div class="form-check form-check-inline" data-toggle="tooltip" data-placement="top"
                            title="Automatically delete the contents when downloading the file">
                            <span
                                style="font-size: 1rem; color: rgb(156, 156, 156); margin-right: 1rem;">&nbsp;&nbsp;|</span>
                            <input class="regular-checkbox-member" type="checkbox" name="autoEraseCheckBox"
                                id="inlineCheckbox1" value="option1" onclick="autoContentErase()">
                            <label class="form-check-label" for="inlineCheckbox1"><span
                                    style="font-size: 1rem; color: rgb(156, 156, 156);">
                                    Auto Delete
                                </span></label>
                        </div>

                        <!-- 자동다운로드 -->
                        <div class="form-check form-check-inline" data-toggle="tooltip" data-placement="top"
                            title="The file is automatically downloaded when the conversion button is clicked.">
                            <input class="regular-checkbox-member" type="checkbox" name="autoFileDownloadCheckBox"
                                id="inlineCheckbox2" value="option1" onclick="autoFileDownload()">
                            <label class="form-check-label" for="inlineCheckbox2"><span
                                    style="font-size: 1rem; color: rgb(156, 156, 156);">
                                    Auto Donwload
                                </span></label>
                        </div>

                        <!-- 문장나누어다운 -->
                        <div class="form-check form-check-inline" data-toggle="tooltip" data-placement="top"
                            title="When downloading a file, divide it into one sentence or paragraph and create a voice files.">
                            <input class="regular-checkbox-member" type="checkbox" name="sentenceDownloadCheckBox"
                                id="sentenceSliceDownloadCheckBox" value="option1" onclick="sentenceDownload()">
                            <label class="form-check-label" for="sentenceSliceDownloadCheckBox"></label>
                            <span style="font-size: 1rem; color: rgb(156, 156, 156);">
                                <select id="selectDivide" class="form-select form-select-sm"
                                    style="border:0;  color: rgb(156, 156, 156);" aria-label=".form-select-sm example"
                                    onchange="selectDivideSelected(value)">
                                    <option selected value="sentence">
                                        Make files by sentence
                                    </option>
                                    <option value="paragraph">
                                        Make files by paragraph
                                    </option>
                                </select>
                            </span>
                        </div>

                        <!-- wav파일 다운로드 선택 -->
                        <div id="wavCheckBlock" class="form-check form-check-inline" data-toggle="tooltip"
                            data-placement="top" title=".wav format file download">
                            <input class="regular-checkbox-member" type="checkbox" name="wavCheckBox" id="wavFileCheckBox"
                                value="option1" onchange="wavBoxChange()">
                            <label class="form-check-label" for="wavFileCheckBox"><span
                                    style="font-size: 1rem; color: rgb(156, 156, 156);">
                                    wav Format
                                </span></label>
                        </div>

                        <audio id="myAudio" class="" src="" controls="controls" hidden></audio>
                        <audio id="dragAudio" class="" src="" controls="controls" controlsList="nodownload"
                            hidden></audio>

                    </div>

                    <div class="form-group" style="margin-bottom: 0 !important;">
                        <div class="row marginforBtn" style="margin-top:0rem;">
                            <!-- 샘플음성듣기 버튼 -->
                            <div class="col-sm-auto phone-padding samplePlayBtn" data-toggle="tooltip"
                                data-placement="bottom" title="Listen to the voice you chose.">
                                <button type="button" id="samplePlay" class="btn btn-dark btn-lg border90">
                                    <!-- <span id="voiceName">(X) 강태하 목소리 <span id="listenOrStop">- Voice</span>&nbsp;&nbsp;&nbsp;<i -->
                                    <span id="voiceName" style="font-size:1rem">강태하</span> <span id="listenOrStop">
                                        - Voice
                                    </span>&nbsp;&nbsp;&nbsp;<i class="fas fa-volume-mute" id="speakerIcon"></i>
                                </button>
                            </div>
                            <!-- 지우기 버튼 -->
                            <div class="col-sm mr-auto" style="padding-left: 0;">
                                <button type="button" id="deleteTextEntry" data-toggle="tooltip" data-placement="bottom"
                                    title="Delete the content"
                                    class="btn btn-outline-secondary btn-lg border90 btn-responsive phone-disappear"
                                    onclick="deleteText()" style="border:1px solid black">
                                    Clear
                                </button>
                            </div>

                            <!-- 음성생성 -->
                            <div id="makeSoundCol" class="col-sm-4" style="float: right;  padding-left: 0;">
                                <button type="button" id="listenVoice" onclick="speakSound()"
                                    class="btn  btn-lg  border90 btn-responsive btn-block  float-right"
                                    style="background-color: #138147; color:white;" data-placement="bottom"
                                    title="Make the text you entered into voice.">

                                    <span id="loader" class="spinner-border spinner-border-sm mb-1" role="status"
                                        aria-hidden="true" style="margin-right:10px; display:none;"></span>

                                    <i class="fas fa-play-circle"></i>&nbsp;&nbsp;Conversion <span
                                            style="font-size: 0.8rem; text-decoration:underline">Ctrl+Enter</span>
                                </button>
                            </div>
                            <!-- 다시듣기 -->
                            <div id="listenVoiceCol" class="col-sm-3"
                                style="float: right; padding-right: 0; padding-left: 0;">
                                <button type="button" id="replayVoice" onclick="replaySound()"
                                    class="btn btn-dark btn-lg  border90 btn-responsive btn-block" data-toggle="tooltip"
                                    title="Replay">
                                    <i class="fas fa-play-circle"></i>&nbsp;&nbsp;
                                    Replay
                                        <!-- <i class="fas fa-copyright" style="font-size: 0.9rem;"></i>&nbsp;<span
                                    id="listenCredit" style="font-size: 0.9rem;"></span> -->
                                </button>
                            </div>
                            <!-- 음성정지하기 -->
                            <div id="stopVoiceCol" class="col-sm-3 afterCreatSoundCol"
                                style="float: right; padding-right: 0; padding-left: 0;">
                                <button type="button" id="stopVoice" onclick="stopSound()"
                                    class="btn btn-danger btn-lg  border90 btn-responsive btn-block"
                                    data-toggle="tooltip" title="Stop">
                                    <i class="fas fa-stop"></i>&nbsp;&nbsp;
                                    Stop
                                </button>
                            </div>


                            <!-- MP3다운로드 -->
                            <div class="col-sm-3 phone-padding afterCreatSoundCol">
                                <div class="form-group">
                                    <button type="button" id="downVoice" onclick="downloadSound()"
                                        class="btn btn-dark btn-lg border90 btn-responsive float-right btn-block"
                                        data-toggle="tooltip" title="Download File"><i
                                            class="fas fa-download"></i>&nbsp;&nbsp;<span id="downloadText">
                                            MP3 download
                                        </span>

                                        <!-- <i class="fas fa-copyright"
                                        style="font-size: 0.9rem;"></i>&nbsp;<span id="downCredit"
                                        style="font-size: 0.9rem;"></span> -->
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div style="text-align: right; padding:0;margin:0; line-height: 0; height: 2.7rem;">
                        <!-- <div id="wavCheckBlock" >
                            <input name="wavCheckBox" type="checkbox" aria-label="Checkbox for following text input"
                                onchange="wavBoxChange()">
                            <input type="checkbox" class="custom-control-input" id="customSwitch1">
                            <span
                                style="font-size: 1rem; color: rgb(110, 110, 110);   line-height: 13px; vertical-align: top; margin:0; padding:0;">wav
                                file</span>
                        </div>
 -->
                    </div>
                </div>


            </div>
            <div class="row" style="padding-left: 15px;">
                <!-- 주의사항 공지 -->
                <div id="warningSign" class="border90 " style="width: 100%; ">
                    <div style="font-size: 1rem; color: rgb(110, 110, 110);  line-height: 1.3rem; display:block; padding: 3px; ">
                        [Caution] When creating synthetic sounds of illegal or anti-social content(disgraceful, obscene, violent such as abusive language, illegal and hateful, sex-discriminatory, etc.) You can not use.
                    </div>


                </div>
            </div>
    </div>
    </section>

    <!-- <p>Music: <cite>Starlight</cite> by Muse</p>

    <p>Waveform Playlist originally written for <a href="https://www.sourcefabric.org/en/airtime">Airtime</a> at <a
        href="https://www.sourcefabric.org">Sourcefabric</a></p>
    <p>The annotation plugin has been sponsored by a fond Italian TED volunteer transcriber, hoping to make easier and
      more fun the transcription process of TEDx talks.</p>
    <p class="copyright">waveform-playlist maintained by <a href="https://github.com/naomiaro">naomiaro</a></p>
    <p>Licensed under the MIT License</p> -->


    <!-- 모달팝업(공지) -->
    <div id="my-modal3" class="modal3" id="analyticsNoticeMobileModal" role="dialog"
        aria-labelledby="analyticsNoticeMobileModalLabel" style="position: absolute; display: none;"
        aria-hidden="false">
        <div class="modal-content3 mx-auto" role="" style="width: 700px">
            <i class="far fa-times-circle"
                style="position: absolute; top: 15px; right: 15px; cursor: pointer; z-index: 99999; font-size: 50px; color:white"
                onclick="closeModal()"></i>
            <img src="../img/event/event_20220409.jpg" style="object-fit: contain; position: relative">
            <!-- <a href='https://forms.gle/FanyY9byiFaiLFyA7' target='_blank'>
                <button class="btn btn-success"
                    style="position: absolute; bottom: 35px; right: 125px; cursor: pointer; z-index: 99999;">커피쿠폰
                    받기</button> </a> -->
            <label
                style="position: absolute; bottom: -16px; right: 90px; cursor: pointer; z-index: 999; font-size: 1.2rem; line-height: 30px; align-self:flex-end; padding: 20px 0 20px 30px; color:white">
                <input id="popupCheck3" type="checkbox" name="popupCheck3" value="blue"
                    style="position: absolute; left:10px; top:28px; width: 20px !important; "> 더이상 보지않기</label>
            <button class="btn btn-light"
                style="position: absolute; bottom: 15px; right: 20px; cursor: pointer; z-index: 99999;"
                onclick="closeModal()">확인</button>
        </div>
    </div>






    <!-- 채팅 적용 -->
    <!-- Channel Plugin Scripts -->
<script>
    (function() {
      var w = window;
      if (w.ChannelIO) {
        return (window.console.error || window.console.log || function(){})('ChannelIO script included twice.');
      }
      var ch = function() {
        ch.c(arguments);
      };
      ch.q = [];
      ch.c = function(args) {
        ch.q.push(args);
      };
      w.ChannelIO = ch;
      function l() {
        if (w.ChannelIOInitialized) {
          return;
        }
        w.ChannelIOInitialized = true;
        var s = document.createElement('script');
        s.type = 'text/javascript';
        s.async = true;
        s.src = 'https://cdn.channel.io/plugin/ch-plugin-web.js';
        s.charset = 'UTF-8';
        var x = document.getElementsByTagName('script')[0];
        x.parentNode.insertBefore(s, x);
      }
      if (document.readyState === 'complete') {
        l();
      } else if (window.attachEvent) {
        window.attachEvent('onload', l);
      } else {
        window.addEventListener('DOMContentLoaded', l, false);
        window.addEventListener('load', l, false);
      }
    })();
    ChannelIO('boot', {
      "pluginKey": "3ed78ed3-a8f9-4c7b-8e36-cef74eb5bf00"
    });
  </script>
  <!-- End Channel Plugin -->        <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>

<script>
    $(function () {
        $('[data-toggle="tooltip"]').tooltip();
    });
</script>

<!-- 
<script type="text/javascript" src="../js/waveform-playlist.var.js"></script>
<script type="text/javascript" src="../js/web-audio-editor.js"></script>
<script type="text/javascript" src="../js/emitter.js"></script> -->

<!-- 페이징처리 js -->
<!-- <script src="../lib/jquery.twbsPagination.min.js" type="text/javascript"></script> -->
<!-- 팝업CDN -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>

<script>
    // 페이지 스크롤 내리기 버튼기능
    $(function () {
        let pagePositon = 0,
            sectionsSeclector = 'section',
            $scrollItems = $(sectionsSeclector),
            offsetTolorence = 30,
            pageMaxPosition = $scrollItems.length - 1;

        //Map the sections:
        $scrollItems.each(function (index, ele) { $(ele).attr("debog", index).data("pos", index); });

        // Bind to scroll
        $(window).bind('scroll', upPos);

        //Move on click:
        $('#arrow a').click(function (e) {
            if ($(this).hasClass('next') && pagePositon + 1 <= pageMaxPosition) {
                pagePositon++;
                $('html, body').stop().animate({
                    scrollTop: $scrollItems.eq(pagePositon).offset().top
                }, "slow");
            }
            // if ($(this).hasClass('previous') && pagePositon-1 >= 0) {
            //     pagePositon--;
            //     $('html, body').stop().animate({ 
            //           scrollTop: $scrollItems.eq(pagePositon).offset().top
            //       }, "slow");
            //     return false;
            // }
        });

        //Update position func:
        function upPos() {
            var fromTop = $(this).scrollTop();
            var $cur = null;
            $scrollItems.each(function (index, ele) {
                if ($(ele).offset().top < fromTop + offsetTolorence) $cur = $(ele);
            });
            if ($cur != null && pagePositon != $cur.data('pos')) {
                pagePositon = $cur.data('pos');
            }
        }
    });

    //팝업 2초뒤에 띄우기
    // setTimeout(function () {
    //     $('#alertMain').fadeIn();
    // }, 10000);

    //오래된 브라우져를 이용하면 신규 브라우져를 이용하라고 팝업.
    !function () {
        if (e = window.navigator.userAgent, o = e.indexOf("MSIE "), t = e.indexOf("Trident/"), o > 0 || t > 0) {
            var e, o, t;
            document.write('<style type="text/css"> #outdated { text-align: center; padding: 32px 0; position: absolute; z-index: 99999;  width: 100%; background: white; box-shadow: 0 1px 4px rgba(0, 0, 0, 0.5);       }      #outdated .warning {         font-size: 54px;         line-height: 65px;         color: #343434;         margin-bottom: 16px;       }       #outdated .paragraph {         color: #656565;         font-size: 19px;         margin-bottom: 16px;       }       #outdated .browser {         display: inline-block;         text-decoration: none;         color: #343434;         padding: 1rem 2rem;         margin-bottom: 8px;       }       #outdated .browser img {         display: block;         margin: 0 auto;       }       #outdated .close-btn {         outline: none;         background: none;         border: none;         font-size: 18px;         color: #656565;       }       #outdated .close-btn:hover {         font-weight: bold;       }     </style>');
            var r = document.createElement("div"); r.id = "outdated", r.innerHTML = '<h3 class="warning"> <br/>[필독] 브라우저를 업그레이드해주세요.     </h3>     <p class="paragraph"> 사용하고 계신 브라우져 버전에서는 원활한 서비스 이용이 어렵습니다. <br/> 아래 버젼으로 업데이트해주세요.</p>' +
                '<div class="browser-container">' +
                '<a href="https://www.google.com/chrome" target="_blank" class="browser"><img src="../img/chrome.jpg" alt="chrome" />Chrome</a>' +
                '<a href="https://www.microsoft.com/ko-kr/windows/microsoft-edge" target="_blank" class="browser"><img src="../img/edge.png" alt="edge" />Edge</a>' +
                '<a href="https://whale.naver.com/ko/download?=main" target="_blank" class="browser"><img src="../img/whale.jpg" alt="edge" />Whale</a>' +
                '<a href="http://www.mozilla.com/firefox" target="_blank" class="browser"><img src="../img/firefox.jpg" alt="firefox" />Firefox</a>' +
                '<a href="https://support.apple.com/downloads/safari" target="_blank" class="browser"><img src="../img/safari.jpg" alt="safari" />Safari</a></div><button class="close-btn" onclick="document.body.removeChild(document.getElementById(\'outdated\'))">다음에 하기</button>', document.body.insertBefore(r, document.body.firstChild)
        }
    }();

    //메인 배경화면 fade in 효과를 한번만 주기위해 실시함
    $('#myCarousel').one('slide.bs.carousel', function () {
        if ($("#mainPictureText").hasClass('fade-in')) {
            $("#mainPictureText").removeClass('fade-in');
        }
    });



    // 숫자에 콤마찍기
    function numberWithCommas(x) {
        return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
    }

    //가입환영 1회 팝업
    $(document).ready(function () {

        let globalPricingLink;
        ""
        globalPricingLink = '<a href="/priceMp3down">'
        ""
        if ("false"=="false") {
            Swal.fire({
            icon: 'info',
            title: 'Membership only',
            html: 'Only members who have joined the membership can use it.' + '<br/>Go to the free audio production page.',
            footer:  globalPricingLink+'Subscribe to membership service</a>',
            allowOutsideClick: false,
            showClass: {
                popup: 'animate__animated animate__fadeInDown'
            },
            hideClass: {
                popup: 'animate__animated animate__fadeOutUp'
            }
            }).then(function (result) {
                if (result.value) {
                    location.replace("/freetts");
                }
            });;
        }
        
        //잔여글자수 표시
        if ("") {
            $('#balanceText').html(" |  Remain : " + numberWithCommas("")+"");
        }


        //잔여글자수 표시
        if ("") {
            $('#balanceDragListen').html(" |  Part Play : " + numberWithCommas("" +"times"));
        }



        //음성버튼 숨기기
        $('.afterCreatSoundCol').hide();
        $('#listenVoiceCol').hide();
        $('#stopVoiceCol').hide();


        //배경합성 버튼 숨기기
        $("#top-bar").hide();
        // $("#master-volume").hide();

        // console.log("firstLogin  : " + sessionStorage.getItem('firstLogin'));
        ""
    });

    //텍스트박스 클릭시 place holder 설명 원위치로
    var usefulTip = "■ Useful tips\n\n① Please use period(.) comma(,) spacing.\n② You can make the voice file using the above option. (slow/fast speed, high/low pitch)\n③ If you want some pause, Click sec Pause button on the right. Only available on a few voices";
    $("#textEntry").focus(function () {
        $("#textEntry").removeClass('bigPlaceholder');
        $("#textEntry").attr("placeholder", usefulTip);
    });

    function forFewVoice(str) {
        if (str == "Seoyeon") {
            $("#textEntry").attr("placeholder", "안녕하세요?\n저는 한여름이에요.\n만나뵙게 돼서 정말 반가워요.\n저의 목소리로 멋진 음성을 만들어보세요.");
            $("#textEntry").addClass('bigPlaceholder');
            str = "";
        }
    }
    let maxTextLength;

    var selectedVoiceLevel = "";



    //스타일 선택
    function styleSelected() {
        const selectedVoice = $("#selectBox option:selected").val();
        const speedText = $("#speedRange").val();
        const pitchText = $("#pitchRange").val();
        const volumeText = $("#volumeRange").val();
        const selectStyle = $("#selectStyle").val() ? $("#selectStyle").val() : "";

        var arr = [speedText, pitchText, selectStyle, volumeText]
        localStorage.setItem(selectedVoice, JSON.stringify(arr));

        $('.afterCreatSoundCol').hide();
        $('#listenVoiceCol').hide();
        $('#stopVoiceCol').hide();
        $('#makeSoundCol').show();
        $("#wavFileCheckBox").prop('disabled', false);
        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
        $("#selectDivide").prop('disabled', false);
        $("#sampleAudio").attr("src", $("#selectStyle option:selected").attr("value2"));
    }


    //문장 또는 문단나누기 선택시
    function selectDivideSelected() {
            localStorage.setItem("sentenceOrParagraph",$('#selectDivide').val() );
    }




    //음성을 선택하면 샘플음성 선택표시부분
    function sampleVoiceChange(str, order) {

        //local Storage에 마지막으로 선택한 음성 저장하기
        var language = $("#langSelect option:selected").val();
        var selectedVoice = $("#selectBox option:selected").val();
        var arr = [language, selectedVoice];
        localStorage.setItem('recentSelect', JSON.stringify(arr));

        //WAV선택했을시 local storage에서 가져온다
        if (localStorage.getItem('wavFormat') != null) {
            if (localStorage.getItem('wavFormat') == "true") {
                $("[name=wavCheckBox]").prop("checked", true);
            } else {
                $("[name=wavCheckBox]").prop("checked", false);
            }
        } else {
            $("[name=wavCheckBox]").prop("checked", true);
        }

        //음성 클릭시 아래 글씨로 표시
        $('#listenOrStop').html('- Voice');

        //세션에 담아서 다음에서 같은 음성이 선택되게끔 하기
        sessionStorage.setItem('selectedVoice', $('#selectBox')[0].selectedIndex);

        //음성 생성버튼 활성화 
        $('#makeSoundCol').show();
        $("#wavFileCheckBox").prop('disabled', false);
        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
        $("#selectDivide").prop('disabled', false);
        $('.afterCreatSoundCol').hide();
        $('#listenVoiceCol').hide();
        $('#stopVoiceCol').hide();

        $.ajax({
            type: 'POST',
            url: '/getSampleVoice',
            dataType: 'json',
            data: { value: str },
            success: function (result) {
                const urlname = result.result;
                //샘플음성 텍스트가 있으면 창에 표시한다.
                if (result.text) {
                    $("#textEntry").attr("placeholder", result.text);
                    $("#textEntry").addClass('bigPlaceholder');
                } else {
                    $("#textEntry").attr("placeholder", usefulTip);
                    $("#textEntry").removeClass('bigPlaceholder');
                }

                //톤조절창 설정
                if (result.dist.startsWith("K") || str == "Kevin" || str == "Seoyeon") {
                    $("#controlPitch").hide();
                    $("#notControlPicth").show();
                } else {
                    $("#controlPitch").show();
                    $("#notControlPicth").hide();
                }

                //I때문에 여기서 이게 꼭 있어야함
                $("#controlSpeed").show();
                $("#notControlSpeed").hide();
                $("#controlVolume").show();
                $("#notControlVolume").hide();

                //최대글자, 끊어읽기설정, WAV설정
                if (result.dist.startsWith("M")) {
                    $("#controlPitch").show();
                    $("#notControlPicth").hide();
                    maxTextLength = 5000;
                    // $("#breakTimeSet").hide();
                    $("#breakTimeSet").show();
                    $("#wavCheckBlock").hide();
                } else if (result.dist.startsWith("G")) {
                    maxTextLength = 5000;
                    $("#breakTimeSet").show();
                    $("#wavCheckBlock").hide();
                } else if (result.dist.startsWith("A")) {
                    maxTextLength = 5000;
                    $("#breakTimeSet").show();
                    $("#wavCheckBlock").hide();
                } else if (result.dist.startsWith("N")) {
                    maxTextLength = 1000;
                    $("#breakTimeSet").hide();
                    $("#wavCheckBlock").show();
                    eraseAllcolumn();
                } else if (result.dist.startsWith("I")) {
                    if (str.includes('V3')) {
                        $("#controlPitch").hide();
                        $("#notControlPicth").show();
                        $("#controlSpeed").hide();
                        $("#notControlSpeed").show();
                        $("#controlVolume").hide();
                        $("#notControlVolume").show();
                    } else {
                        $("#controlPitch").show();
                        $("#notControlPicth").hide();
                        $("#controlSpeed").show();
                        $("#notControlSpeed").hide();
                        $("#controlVolume").show();
                        $("#notControlVolume").hide();
                    }
                    maxTextLength = 1000;
                    $("#breakTimeSet").show();
                    $("#wavCheckBlock").show();
                } else {
                    maxTextLength = 1000;
                    $("#breakTimeSet").hide();
                    $("#wavCheckBlock").hide();
                }

                $('#textCounter').html("Count" + ' : ' + $('#textEntry').val().length + " / " + maxTextLength);

                //글자수 제어하기
                if ($('#textEntry').val().length > maxTextLength) {
                    var popText = "This voice has " + maxTextLength + "Characters Limit";
                    var popTitle = "Confirm";
                    Swal.fire({
                        text: popText,
                        icon: 'warning',
                        confirmButtonText: popTitle
                    }).then((result) => {
                        $('#textEntry').val($('#textEntry').val().substr(0, maxTextLength));
                        $('#textCounter').html("Count" + ' : ' + $('#textEntry').val().length + " / " + maxTextLength);
                    });
                }

                //샘플음성이 없을경우
                if (urlname == "") {
                    $("#sampleAudio").hide();
                    $("#samplePlay").hide();
                    return false;
                } else {

                    $("#samplePlay").show();
                    $("#sampleAudio").show();
                    $("#sampleAudio").attr("src", urlname);
                    $('#voiceName').text(result.name);
                    // 샘플음성 남녀 색깔 버튼 바뀌는 기능
                    // if (result.gender == "Male") {
                    //     $("#samplePlay").removeClass('redBtn');
                    //     $("#samplePlay").addClass('blueBtn');
                    // } else {
                    //     $("#samplePlay").removeClass('blueBtn')
                    //     $("#samplePlay").addClass('redBtn');
                    // }
                }



                //텍스트 입력창 placeholder 원상태로 복귀

                if (order == "first") {
                    $("#textEntry").removeClass('bigPlaceholder');
                    $("#textEntry").attr("placeholder", usefulTip);
                }
                //영어배경음 처음으로 돌리기
                //backgroundAudio.currentTime = 0; // Reset time
                //10초 미리듣기 다시 활성화
                $("#listenVoice").prop('disabled', false);

                //버튼 글씨에 크레딧 얼마 차감되는지 확인
                selectedVoiceLevel = result.level;
                var textEntry = $("#textEntry").val();
                textEntry = textEntry.replace(/\?|\!|\,|\.|(\s*)/g, "");

                // var downCredit = ""
                // var listenCredit = ""
                if (selectedVoiceLevel == 1) {
                    downCredit = textEntry.length * 13;
                    listenCredit = textEntry.length * 2;
                } else if (selectedVoiceLevel == 2) {
                    downCredit = textEntry.length * 24;
                    listenCredit = textEntry.length * 4;
                } else if (selectedVoiceLevel == 3) {
                    downCredit = textEntry.length * 33;
                    listenCredit = textEntry.length * 6;
                }
                $('#downCredit').html(downCredit);
                // $('#listenCredit').html(listenCredit);




                //음성에 스타일 음성들이 존재하면 실행
                if (result.style) {
                    $("#selectStyleDiv").show();
                    const arrayStyle = result.style.split(",");
                    const arrayStyleUrl = result.styleUrl.split(",");
                    let str = ""
                    let i = 0;
                    for (let item of arrayStyle) {
                        str += "<option value='" + item + "' value2='" + arrayStyleUrl[i] + "'>" + "스타일" + ++i + "</option>"
                    }
                    document.getElementById("selectStyle").innerHTML = str;
                    $("#sampleAudio").attr("src", arrayStyleUrl[0]);

                } else {
                    document.getElementById("selectStyle").innerHTML = "";
                    $("#selectStyleDiv").hide();
                }

                //local Storage에 데이터가 있으면 speed 와 pitch와 style을 불러온다.        
                if (localStorage.getItem(str) != null) {
                    const output = localStorage.getItem(str);
                    const arr = JSON.parse(output);
                    $("#speedRange").val(arr[0]);
                    $("#pitchRange").val(arr[1]);
                    if (arr[2]) {
                        //스타일을 불러온다
                        $('#selectStyle').val(arr[2]).prop("selected", true);
                        $("#sampleAudio").attr("src", $("#selectStyle option:selected").attr("value2"));
                    }
                    if(arr[3]){
                        $("#volumeRange").val(arr[3])
                    }
                } else {
                    $("#speedRange").val(0);
                    $("#pitchRange").val(0);
                    $("#volumeRange").val(0);
                }


                positionBubble(rangeBubble, rangeInput);

                positionBubble(speedBubble, speedInput);
                
                positionBubble(volumeBubble, volumeInput);
            }
        });
    }


    //샘플음성 듣기 클릭
    $('#samplePlay').click(function () {
        var sampleAudio = document.getElementById('sampleAudio');
        if (sampleAudio.duration > 0 && !sampleAudio.paused) {
            sampleAudio.pause(); // Stop playing
            sampleAudio.currentTime = 0; // Reset time
            $('#listenOrStop').html('- Voice');
            $("#speakerIcon").removeClass('fa-volume-up');
            $("#speakerIcon").addClass('fa-volume-mute');
        }
        else {
            sampleAudio.play();
            $('#listenOrStop').html('- Stop');
            $("#speakerIcon").removeClass('fa-volume-mute');
            $("#speakerIcon").addClass('fa-volume-up');
            $('#sampleAudio').on('ended', function () {
                $('#listenOrStop').html('- Voice');
                $("#speakerIcon").removeClass('fa-volume-up');
                $("#speakerIcon").addClass('fa-volume-mute');

                //텍스트박스 설명 원위치
                $("#textEntry").removeClass('bigPlaceholder');
                $("#textEntry").attr("placeholder", usefulTip);
            });
        }
    });

    //고객센터 이메일 보내기
    $("#sendEmail").click(function () {
        if (!CheckEmail($('#form_email').val())) {
            return false;
        }

        if ($('#form_email').val() == '') {
            alert("Please enter the correct email.");
            return;
        }

        var emailAddress = $('#form_email').val();
        var optionSelectBox = document.getElementById("form_need");
        var askValue = optionSelectBox.options[optionSelectBox.selectedIndex].value;
        var customerName = $('#form_name').val();
        var contact = $('#form_contact').val();
        var cusMessage = $('#form_message').val();

        $("#sendEmail").prop('disabled', true);

        $.ajax({
            type: 'POST',
            url: '/email',
            dataType: 'json',
            data: { name: customerName, email: emailAddress, contactNum: contact, need: askValue, message: cusMessage },
            success: function (result) {

                var successTitle = "Completed";
                var successText = "It has been successfully submitted to the customer center.";
                Swal.fire(successTitle, successText, 'success');
                $("#sendEmail").prop('disabled', false);
                $('#form_email').val('');
                $('#form_name').val('');
                $('#form_contact').val('');
                $('#form_message').val('');
            }
        });
    });


    //처음 페이지 로드시 한국어로 음성 가져옮
    //메인페이지에만 있게 해야함
    $(document).ready(function () {
        //설문조사 중지
        if (localStorage.getItem('popupCheck3') == false || localStorage.getItem('popupCheck3') == null) {
            ""
            openModal();
            ""
        }


        //띄워읽기 숫자를 가져온다
        if (localStorage.getItem('breakTime') != null) {
            $('input[name=quantity]').val(parseFloat(localStorage.getItem('breakTime')));
        }

        //WAV선택했을시 local storage에서 가져온다
        if (localStorage.getItem('autoContentErase') != null) {
            if (localStorage.getItem('autoContentErase') == "true") {
                $("[name=autoEraseCheckBox]").prop("checked", true);
            } else {
                $("[name=autoEraseCheckBox]").prop("checked", false);
            }
        } else {
            $("[name=autoEraseCheckBox]").prop("checked", false);
        }

        // 자동다운 선택했을시 local storage에서 가져온다
        if (localStorage.getItem('autoFileDownload') != null) {
            if (localStorage.getItem('autoFileDownload') == "true") {
                $("[name=autoFileDownloadCheckBox]").prop("checked", true);
            } else {
                $("[name=autoFileDownloadCheckBox]").prop("checked", false);
            }
        } else {
            $("[name=autoFileDownloadCheckBox]").prop("checked", false);
        }


        // 문장별 다운로드 선택했을시 local storage에서 가져온다
        if (localStorage.getItem('sentenceDownload') != null) {
            if (localStorage.getItem('sentenceDownload') == "true") {
                $("[name=sentenceDownloadCheckBox]").prop("checked", true);
            } else {
                $("[name=sentenceDownloadCheckBox]").prop("checked", false);
            }
        } else {
            $("[name=sentenceDownloadCheckBox]").prop("checked", false);
        }


        //문장 또는 문단나누기 선택시 local storage에서 가져온다
        if (localStorage.getItem('sentenceOrParagraph') != null) {
            if (localStorage.getItem('sentenceOrParagraph') == "sentence") {
                $('#selectDivide').val("sentence").prop("selected", true);
            } else {
                $('#selectDivide').val("paragraph").prop("selected", true);
            }
        } else {
            $('#selectDivide').val("sentence").prop("selected", true);
        }

        let output;
        let arr;
        //마지막으로 선택한 음성이 있으면 불러오기
        if (localStorage.getItem('recentSelect') != null) {

            output = localStorage.getItem('recentSelect');
            arr = JSON.parse(output);

            $('#langSelect').val(arr[0]).prop("selected", true);

            var oldSel = $('#selectBox').get(0);
            $.ajax({
                type: 'POST',
                url: '/voiceList',
                dataType: 'json',
                data: { country: arr[0] },
                success: function (result) {
                    $('option', oldSel).remove();
                    for (i = 0; i < result.result.length; i++) {
                        var opt = document.createElement('option');
                        opt.value = result.result[i].value;
                        if (result.result[i].new) {
                      // opt.style.backgroundColor = "rgb(234 212 172)"
                      opt.classList.add('optionNewVoiceColor');
                        }
                        opt.innerHTML = result.result[i].text;
                        if (result.result[i].value == "divide") {
                            opt.setAttribute('disabled', true);
                        }
                        oldSel.add(opt, null);
                    }

                    $('#selectBox').val(arr[1]).prop("selected", true);
                    sampleVoiceChange(arr[1], "first");
                }
            });
        } else {

            let countrySelect;
            ""
            $('#langSelect').val("Korean").prop("selected", true);
            countrySelect = "Korean"
            output = '["Korean","Seoyeon"]';
            arr = JSON.parse(output);


            ""



            var oldSel = $('#selectBox').get(0);
            $.ajax({
                type: 'POST',
                url: '/voiceList',
                dataType: 'json',
                data: { country: countrySelect },
                success: function (result) {
                    $('option', oldSel).remove();
                    for (i = 0; i < result.result.length; i++) {
                        var opt = document.createElement('option');

                        // opt.text = result.result[i].text;
                        opt.value = result.result[i].value;
                        if (result.result[i].new) {
                            // opt.style.backgroundColor = "rgb(234 212 172)"
                            opt.classList.add('optionNewVoiceColor');
                        }
                        //opt.innerHTML="<i class='fas fa-play-circle'></i>"+result.result[i].text;
                        //opt.innerHTML="&#xf2b9;"+result.result[i].text;
                        // <img class="silverMedal" src="../img/silver.png" width="20" />
                        //opt.innerHTML = "<img src='../img/silver.png' width='30'>";
                        opt.innerHTML = result.result[i].text;
                        if (result.result[i].value == "divide") {
                            opt.setAttribute('disabled', true);
                        }

                        oldSel.add(opt, null);
                    }
                    if(countrySelect == 'Korean'){
                        $('#selectBox').val(arr[1]).prop("selected", true);
                        sampleVoiceChange(arr[1], "first");
                        // $('#selectBox option')[1].selected = true;
                        // sampleVoiceChange($('#selectBox option')[1].value, "first")
                    }else{
                        $('#selectBox option')[0].selected = true;
                        sampleVoiceChange($('#selectBox option')[0].value, "first")
                    }

                    // var langSelectBox = document.getElementById("langSelect");
                    // var selectedCountry = langSelectBox.options[langSelectBox.selectedIndex].value;


                    //선택한 음성이 계속 선택되게 하기 위함(영문설정을 다시 만지고 열어야함 / 차후해야함)
                    // if (sessionStorage.getItem('selectedVoice') === null) {
                    //     $('#selectBox option')[0].selected = true;
                    //     //처음 제일 상단에 있는 음성 선택
                    //     sampleVoiceChange($('#selectBox option')[0].value, "first");
                    // } else {
                    //      $('#selectBox option')[sessionStorage.getItem('selectedVoice')].selected = true;
                    //     sampleVoiceChange($('#selectBox option')[sessionStorage.getItem('selectedVoice')].value, "first");
                    // }


                    // $("#textEntry").attr("placeholder", "■ 유용한 Tip~\n\n①   마침표, 쉼표, 띄어쓰기를 꼭 사용하세요. 쉼표를 적절히 자주 붙이면 내용이 명확해집니다.\n②   한 문장씩만 미리듣고, MP3 다운을 추천드려요.\n③   마침표를 제외한 특수문자는 사용하지 마세요. 몇가지 음성에서만 물음표 사용이 가능합니다.")



                    // if(result.result[0].gender=="Male"){
                    //         $("#samplePlay").removeClass('redBtn');
                    //         $("#samplePlay").addClass('blueBtn');
                    // }else{
                    //     $("#samplePlay").removeClass('blueBtn')
                    //     $("#samplePlay").addClass('redBtn');
                    // }
                }
            });

            //여기까지 원본
        }

    });


    //언어를 변경하면 해당하는 음성리스트 가져오기
    $(function () {
        $('#langSelect').change(function () {
            var langSelectBox = document.getElementById("langSelect");
            var selectedCountry = langSelectBox.options[langSelectBox.selectedIndex].value;
            var oldSel = $('#selectBox').get(0);
            $.ajax({
                type: 'POST',
                url: '/voiceList',
                dataType: 'json',
                data: { country: selectedCountry },
                success: function (result) {
                    $('option', oldSel).remove();
                    for (i = 0; i < result.result.length; i++) {
                        var opt = document.createElement('option');
                        if (result.result[i].new) {
                          // opt.style.backgroundColor = "rgb(234 212 172)"
                          opt.classList.add('optionNewVoiceColor');
                        }
                        opt.text = result.result[i].text;
                        opt.value = result.result[i].value;
                        if (result.result[i].value == "divide") {
                            opt.setAttribute('disabled', true);
                        }
                        oldSel.add(opt, null);
                    }
                    if(selectedCountry == 'Korean'){
                        $('#selectBox option')[1].selected = true;
                    sampleVoiceChange($('#selectBox option')[1].value, "first")
                    }else{
                        $('#selectBox option')[0].selected = true;
                    sampleVoiceChange($('#selectBox option')[0].value, "first")
                    }
                    
                }
            });
        });


        //고객센터 항목 변경시
        $('#form_need').change(function () {

            var CcSelectBox = document.getElementById("form_need");
            var selectedCc = CcSelectBox.options[CcSelectBox.selectedIndex].value;

            if (selectedCc == "연결세트 신청") {
                $('#form_message').val("[필수 입력항목]\n1. 물품을 받을 주소 : \n2. 방송장비와 컴퓨터와의 거리(m) :\n3. 기타문의사항 :");
            } else if (selectedCc == "설치기사 신청") {
                $('#form_message').val("[필수 입력항목]\n※ 방문기사가 스케쥴을 잡기 위해 사전에 연락드립니다. \n1. 설치장소 주소 : \n2. 방송장비와 컴퓨터와의 거리(m) : \n3. 기타문의사항 :");
            }
            else {
                $('#form_message').val('');
            }
        });
    });


    // //이메일 유효성 검사
    function CheckEmail(str) {
        var reg_email = /^([0-9a-zA-Z_\.-]+)@([0-9a-zA-Z_-]+)(\.[0-9a-zA-Z_-]+){1,2}$/;
        if (!reg_email.test(str)) {
            alert("Please enter the correct email.");
            return false;
        }
        else {
            return true;
        }
    }

    // //아이디 중복체크
    $("#ckeckBtn").click(function () {
        if (!CheckEmail($('#userId').val())) {
            return false;
        }
        $('#userId').change(function () {
            $('#id_check_sucess').hide();
            $('#ckeckBtn').show();
            $('#userId').attr("check_result", "fail");
        })

        if ($('#userId').val() == '') {
            alert("Please enter the correct email.");
            return;
        }

        id_overlap_input = $('#userId').val();

        $.ajax({
            url: "/users/duplicate/" + id_overlap_input,
            method: "GET",
            success: function (data) {
                if (data.username != null) {
                    alert("The ID that already exists.");
                    id_overlap_input.focus();
                    return;
                } else {
                    alert("The ID is available");
                    $('#userId').attr("check_result", "success");
                    // $('#id_check_sucess').show();
                    $('#ckeckBtn').hide();
                    // alert($('#userId').attr("check_result"));
                    return;
                }
            }
        });
    });

    // //회원가입 전 유효성 검사
    $("#submitRegister").click(function () {

        var email = $("#userId");
        var password = $("#pwd1");
        var userName = $("#userName");

        if (email.val() == "") {
            var text = "Please enter your e-mail.";
            Swal.fire('Please', text, 'warning');
            email.focus();
            return false;
        }

        if ($('#userId').attr("check_result") == "fail") {
            alert("Please do the duplicate user id check.");
            $('#userId').focus();
            return false;
        }

        if (!chkPW()) {
            return false;
        };

        if (password.val() == "") {
            alert("Type your new password");
            password.focus();
            return false;
        }

        if (userName.val() == "") {
            alert("Input your name, please.");
            userName.focus();
            return false;
        }

    });

    //회원가입시 비밀번호가 서로 일치하는지 확인
    $(function () {
        // $("#alert-success").hide();
        $("#alert-danger").hide();
        $("input").keyup(function () {
            var pwd1 = $("#pwd1").val();
            var pwd2 = $("#pwd2").val();
            if (pwd1 != "" || pwd2 != "") {
                if (pwd1 == pwd2) {
                    // $("#alert-success").show();
                    $("#alert-danger").hide();
                    $("#submitRegister").removeAttr("disabled");
                } else {
                    // $("#alert-success").hide();
                    $("#alert-danger").show();
                    $("#submitRegister").attr("disabled", "disabled");
                }
            }
        });
    });

    //비밀번호 유효성 체크
    function chkPW() {
        var pw = $("#pwd1").val();
        var num = pw.search(/[0-9]/g);
        var eng = pw.search(/[a-z]/ig);
        var spe = pw.search(/[`~!@@#$%^&*|₩₩₩'₩";:₩/?]/gi);
        if (pw.length < 4 || pw.length > 20) {
            alert("Use 8~16 letters uppercase and lowercase letters including numbers and special characters");
            return false;
        } else if (pw.search(/\s/) != -1) {
            alert("Please enter your password without spaces.");
            return false;
        } else {
            return true;
        }
    }


    //띄워읽기 직접 입력시 자동완성
    function keyDown(ev) {
        const input = document.getElementById('textEntry');
        const cursorPos = $('#textEntry').prop('selectionStart');
        const v = $('#textEntry').val();
        const textBefore = v.substring(0, cursorPos);
        const textAfter = v.substring(cursorPos, v.length);
        const numForInput = $('#tempStopSecond').val();
        const thisPos = cursorPos + numForInput.length + 2;

        if (ev.shiftKey) {
            if (ev.keyCode == 219) {
                setTimeout(function () {
                    $('#textEntry').val(textBefore + "{" + numForInput + "}" + textAfter);
                    input.setSelectionRange(thisPos, thisPos);
                }, 0);
            }
        }

        if ((ev.keyCode == 10 || ev.keyCode == 13) && ev.ctrlKey) {
            speakSound();
        }
    }


    var downCredit = ""
    var listenCredit = ""
    //글자수 카운트 하는 기능
    $(function () {
        $('#textEntry').keyup(function (e) {
            var textEntry = $(this).val();

            //공백, 마침표와 특수문자를 글자수에 포함하지 않는다.
            // textEntry = textEntry.replace(/\?|\!|\,|\[|\]|\.|(\s*)/g, "");

            //선택된 음성의 이름(value)
            if (textEntry.length > maxTextLength) {
                var popText = "This voice has " + maxTextLength + "Characters Limit";
                var popTitle = "Confirm";
                Swal.fire({
                    text: popText,
                    icon: 'warning',
                    confirmButtonText: popTitle
                }).then((result) => {
                    $('#textEntry').val(textEntry.substr(0, maxTextLength));
                    $('#textCounter').html("Count" + ' : ' + $(this).val().length + " / " + maxTextLength);
                });
            }

            let realTextCount;
            realTextCount = textEntry.replace(/\{.*?\}/g, '');
            // let count = (textEntry.match(/ *\{.*?\} */g) || []).length; 
            // realTextCount = textEntry.length - (count *5)

            // $('#textCounter').html("Count" + ' : ' + textEntry.length + " / " + maxTextLength );

            //띄워읽기 글자수 나오지 않게 설정
            $('#textCounter').html("Count" + ' : ' + realTextCount.length + " / " + maxTextLength);
            //버튼 글씨에 크레딧 얼마 차감되는지 확인
            // var downCredit = ""
            // var listenCredit = ""
            if (selectedVoiceLevel == 1) {
                downCredit = textEntry.length * 13;
                listenCredit = textEntry.length * 2;
            } else if (selectedVoiceLevel == 2) {
                downCredit = textEntry.length * 24;
                listenCredit = textEntry.length * 4;
            } else if (selectedVoiceLevel == 3) {
                downCredit = textEntry.length * 33;
                listenCredit = textEntry.length * 6;
            }

            // $('#downCredit').html(downCredit);
            // $('#listenCredit').html(listenCredit);

            if ($("#replayBtn").hasClass('btn-dark')) {
                $("#replayBtn").addClass('btn-outline-secondary');
                $("#replayBtn").removeClass('btn-dark');
                // $("#myAudio").attr("src", "");
                $("#replayBtn").prop('disabled', true);
            }


            // if (textEntry.length == 0) {
            //     $("#deleteTextEntry").prop('disabled', true);
            // } else {
            //     $("#deleteTextEntry").prop('disabled', false);
            // }

            //음성생성 버튼 다시 보이게
            if ($('.afterCreatSoundCol').is(":visible") || $('#listenVoiceCol').is(":visible") || $('#stopVoiceCol').is(":visible")) {
                $('.afterCreatSoundCol').hide();
                $('#listenVoiceCol').hide();
                $('#stopVoiceCol').hide();
                $('#makeSoundCol').show();
                $("#wavFileCheckBox").prop('disabled', false);
                $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
                $("#selectDivide").prop('disabled', false);
                $("#listenVoice").prop('disabled', false);
            }
        });
        $('#textEntry').keyup();
    });

    //새글쓰기 기능
    function deleteText() {
        if ($('#textEntry').val('')) {
            return;
        }
        $('#textEntry').val('');
        $('#textCounter').html("Count" + ' : 0');
        $("#listenVoice").prop('disabled', false);
        $('#makeSoundCol').show();
        $("#wavFileCheckBox").prop('disabled', false);
        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
        $("#selectDivide").prop('disabled', false);
        $('.afterCreatSoundCol').hide();
        $('#listenVoiceCol').hide();
        $('#stopVoiceCol').hide();


        $("#myAudio").attr("src", "");
        //backgroundAudio.pause();
        $("#deleteTextEntry").prop('disabled', true);

        if ($("#replayBtn").hasClass('btn-dark')) {
            $("#replayBtn").addClass('btn-outline-secondary');
            $("#replayBtn").removeClass('btn-dark');
            // $("#myAudio").attr("src", "");
            $("#replayBtn").prop('disabled', true);
        }

    }


    //     function deleteText() {
    //     $.ajax({
    //         type: 'POST',
    //         url: 'https://www.wemakevoice.com/restapi/v1/voice',
    //         dataType: 'json',
    //         data:
    //         {
    //             'speed': 10, 'voiceName': "한여름", 'text': "<break time='5.0s'/>감사합니다. 좋은하루 보내세요.", 'pitch': 0
    //         },
    //         beforeSend: function (xhr) {
    //             xhr.setRequestHeader("Authorization", "Bearer 키"); //Bearer [발급받은 key입력]
    //         },
    //         success: function (result) {
    //             if (result) {
    //                 var audioSrc = 'data:audio/mp3;base64,' + result.result;
    //                 $("#myAudio").attr("src", audioSrc);
    //                 $('#myAudio').trigger("play");
    //             }
    //         },
    //         error: function (request, status, error) {
    //             // 에러 처리
    //             console.log("code = " + request.status + " message = " + request.responseText + " error = " + error);
    //         },
    //         complete: function (data) {
    //         }
    //     });
    // }




    function strip(number) {
        return (parseFloat(number).toPrecision(12));
    }

    jQuery(document).ready(function () {
        // This button will increment the value
        $('[data-quantity="plus"]').click(function (e) {
            // Stop acting like a button
            e.preventDefault();
            // Get the field name
            fieldName = $(this).attr('data-field');
            // Get its current value
            // var currentVal = parseFloat($('input[name='+fieldName+']').val());
            var currentVal = (Math.round($('input[name=' + fieldName + ']').val() * 100) / 100).toFixed(1);

            // If is not undefined
            if (!isNaN(currentVal)) {
                // Increment
                $('input[name=' + fieldName + ']').val((Math.round((parseFloat(currentVal) + 0.1) * 100) / 100).toFixed(1));

                //스토리지 저장
                localStorage.setItem("breakTime", (Math.round((parseFloat(currentVal) + 0.1) * 100) / 100).toFixed(1));
            } else {
                // Otherwise put a 0 there
                $('input[name=' + fieldName + ']').val(0);
            }


        });
        // This button will decrement the value till 0
        $('[data-quantity="minus"]').click(function (e) {
            // Stop acting like a button
            e.preventDefault();
            // Get the field name
            fieldName = $(this).attr('data-field');
            // Get its current value
            // var currentVal = parseFloat($('input[name='+fieldName+']').val());
            var currentVal = (Math.round($('input[name=' + fieldName + ']').val() * 100) / 100).toFixed(1);
            // If it isn't undefined or its greater than 0
            if (!isNaN(currentVal) && currentVal > 0) {
                // Decrement one
                $('input[name=' + fieldName + ']').val((Math.round((parseFloat(currentVal) - 0.1) * 100) / 100).toFixed(1));

                //스토리지 저장
                localStorage.setItem("breakTime", (Math.round((parseFloat(currentVal) - 0.1) * 100) / 100).toFixed(1));
            } else {
                // Otherwise put a 0 there
                $('input[name=' + fieldName + ']').val(0);
            }
        });
    });

    //띄워읽기(일시정지) 기능 넣기
    $('#tempStop').on('click', function () {

        const input = document.getElementById('textEntry');
        var cursorPos = $('#textEntry').prop('selectionStart');

        var v = $('#textEntry').val();
        var textBefore = v.substring(0, cursorPos);
        var textAfter = v.substring(cursorPos, v.length);
        var numForInput = $('#tempStopSecond').val();
        $('#textEntry').val(textBefore + "{" + numForInput + "}" + textAfter);


        let thisPos = cursorPos + numForInput.length + 2;

        //글자수 카운트 반영을 위해
        $('#textEntry').keyup();
        input.focus();
        input.setSelectionRange(thisPos, thisPos);
    });

    //wav다운로드 클릭시
    function wavBoxChange() {
        localStorage.setItem("wavFormat", $("[name=wavCheckBox]").prop("checked"));
    }

    //내용자동삭제 클릭시
    function autoContentErase() {
        localStorage.setItem("autoContentErase", $("[name=autoEraseCheckBox]").prop("checked"));
    }

    //내용자동 다운로드 클릭시
    function autoFileDownload() {
        if ("false"=="false") {
            Swal.fire({ title: "It is only available to membership(one month) users.", icon: 'warning', confirmButtonText: "Confirm" })
                .then(function (result) {
                    $("[name=autoFileDownloadCheckBox]").prop("checked", false);
                    localStorage.setItem("autoFileDownload", $("[name=autoFileDownloadCheckBox]").prop("checked"));
                });
            return;
        }else{
            localStorage.setItem("autoFileDownload", $("[name=autoFileDownloadCheckBox]").prop("checked"));
        }
    }

    //문장별 다운로드 클릭시
    function sentenceDownload() {
        if ("false"=="false") {
            Swal.fire({ title: "It is only available to membership(one month) users.", icon: 'warning', confirmButtonText: "Confirm" })
                .then(function (result) {
                    $("[name=sentenceDownloadCheckBox]").prop("checked", false);
                    localStorage.setItem("sentenceDownload", $("[name=sentenceDownloadCheckBox]").prop("checked"));
                });
            return;
        }else{
            localStorage.setItem("sentenceDownload", $("[name=sentenceDownloadCheckBox]").prop("checked"));
        }
    }


    //말빠르기 값 변환시
    function speedRangeChange() {
        var selectedVoice = $("#selectBox option:selected").val();
        var speedText = $("#speedRange").val();
        var pitchText = $("#pitchRange").val();
        var volumeText = $("#volumeRange").val();
        const selectStyle = $("#selectStyle").val() ? $("#selectStyle").val() : "";
      
        $('.afterCreatSoundCol').hide();
        $('#listenVoiceCol').hide();
        $('#stopVoiceCol').hide();
        $('#makeSoundCol').show();
        $("#wavFileCheckBox").prop('disabled', false);
        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
        $("#selectDivide").prop('disabled', false);

        var arr = [speedText, pitchText, selectStyle, volumeText]
        localStorage.setItem(selectedVoice, JSON.stringify(arr));
    }
    //pitch값 변환시
    function pitchRangeChange() {
        var selectedVoice = $("#selectBox option:selected").val();
        var speedText = $("#speedRange").val();
        var pitchText = $("#pitchRange").val();
        var volumeText = $("#volumeRange").val();
        const selectStyle = $("#selectStyle").val() ? $("#selectStyle").val() : "";

        $('.afterCreatSoundCol').hide();
        $('#listenVoiceCol').hide();
        $('#stopVoiceCol').hide();
        $('#makeSoundCol').show();
        $("#wavFileCheckBox").prop('disabled', false);
        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
        $("#selectDivide").prop('disabled', false);

        var arr = [speedText, pitchText, selectStyle, volumeText]
        localStorage.setItem(selectedVoice, JSON.stringify(arr));
    }

    //volume값 변환시
    function volumeRangeChange() {
        var selectedVoice = $("#selectBox option:selected").val();
        var speedText = $("#speedRange").val();
        var pitchText = $("#pitchRange").val();
        var volumeText = $("#volumeRange").val();
        const selectStyle = $("#selectStyle").val() ? $("#selectStyle").val() : "";

        $('.afterCreatSoundCol').hide();
        $('#listenVoiceCol').hide();
        $('#stopVoiceCol').hide();
        $('#makeSoundCol').show();
        $("#wavFileCheckBox").prop('disabled', false);
        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
        $("#selectDivide").prop('disabled', false);

        var arr = [speedText, pitchText, selectStyle, volumeText]
        localStorage.setItem(selectedVoice, JSON.stringify(arr));
    }


    //원본 특수문자
    // var regExp = /[\{\}\[\]\/;:|\)*`^\-_+@\#$%&\\\=\(\'\"]/gi;

    //수정 특수문자 [, ], \ 삭제되지 않게 설정
    var regExp = /[\<\>\[\]\/;:|\)*`^_&\=\(\·]/gi;


    let totalBalanceCharacter;

    //잔여글자수 표시
    if ("") {
        totalBalanceCharacter = "";
    }

    //영어발음 배경
    //var audioSrcSample = "https://wemakevoice.s3.ap-northeast-2.amazonaws.com/sampleVoice/%EC%83%98%ED%94%8C%EC%9D%8C%EC%84%B1/sample.mp3";

    //노래 배경음
    //var audioSrcSample = "https://wemakevoice.s3.ap-northeast-2.amazonaws.com/sampleVoice/%EC%83%98%ED%94%8C%EC%9D%8C%EC%84%B1/backgroundsound.mp3";
    //var backgroundAudio = new Audio(audioSrcSample);
    //backgroundAudio.volume = 0.2;
    //backgroundAudio.loop = true;
    //backgroundAudio.load();

    //제한글자
    function fnCheckForRestrictedWords() {
        var restrictedWords = new Array("섹스", "쎅쓰", "섹쓰", "색쓰", "보지털", "보지구멍", "좆물", "보지구멍", "개새끼", "씹새끼", "씨발", "미친새끼", "쌔끼", "버러지새끼", "병신", "좆까", "섹수", "개좃", "색스", "쌕스");
        var txtInput = document.getElementById("textEntry").value;
        var error = 0;
        for (var i = 0; i < restrictedWords.length; i++) {
            var val = restrictedWords[i];
            if ((txtInput.toLowerCase()).indexOf(val.toString()) > -1) {
                error = error + 1;
            }
        }

        if (error > 0) {
            return false;
        }
        else {
            return true;
        }
    }

    //다시듣기
    function replaySound() {
        indexWavArray = 0;
        if ($("[name=wavCheckBox]").prop("checked") == true && $("[name=sentenceDownloadCheckBox]").prop("checked")==true && $("#wavCheckBlock").is(":visible")  || audioWavArrayResult.length>1 ){
                if(indexWavArray < audioWavArrayResult.length){
                    $("#myAudio").attr("src",'data:audio/wav;base64,' + audioWavArrayResult[indexWavArray]);
                    $('#myAudio').trigger("play");
                    indexWavArray++;
                }
                replayPrevent =true;
        } else{
            replayPrevent = false;
            $('#myAudio').trigger("play");
            $('#textEntry').focus();
        }
        
    }
    let replayPrevent;//다시듣기 클릭시 중복으로 들리는 현상 방지

    const firstMember = ["deca9855@naver.com", "dyun77@naver.com", "jinikki02@nate.com", "iamhkyu@naver.com", "cho0817@jwc-cctv.com"];
    //음성다운로드 기능
    function downloadSound() {
        if (firstMember.includes("")) {

        } else if ("") {

        } else if ("") {

        }
        else if (!"" || !"") {

            Swal.fire({ text: "Only those who purchased the membership can download it.", icon: 'warning', confirmButtonText: "Confirm" })
                .then(function (result) {
                    if (result.value) {
                        // location.replace("/users/registerTerms");
                    }
                });
            return;
        }

        //zip 으로 문장 나누어 다운받기 선택
        if ($("[name=sentenceDownloadCheckBox]").prop("checked")) {
            let a = window.document.createElement('a');
            a.href = "data:application/zip;base64," + zipData;
            a.download = fileNameSetting();
            a.click();
        } else {
            var audioSrc = $("#myAudio").attr("src");
            download(audioSrc, fileNameSetting());
        }

        //내용 자동삭제 설정
        if ($("[name=autoEraseCheckBox]").prop("checked")) {
            $('#textEntry').val('');
        }

        //포커스를 텍스트박스로
        $('#textEntry').focus();
    }

    //zip 데이터
    let zipData;

    //전체 띄워읽기 적용하기
    function autoSpace() {
        let mainTextArea = document.getElementById("textEntry");
        mainTextArea.value = mainTextArea.value.replace(/ *\{.*?\} */g, ' ');
        // mainTextArea.value = mainTextArea.value.replace(/ *\{.*?\} */g, `{${$('#tempStopSecond').val()}}`);
        mainTextArea.value = mainTextArea.value.replace(/\./g, `.{${$('#tempStopSecond').val()}}`);
        mainTextArea.value = mainTextArea.value.replace(/\?/g, `?{${$('#tempStopSecond').val()}}`);

        //글자수 카운트
        $('#textEntry').keyup();
    }

    //전체 띄워읽기 지우기
    function eraseAllcolumn() {
        let mainTextArea = document.getElementById("textEntry");
        mainTextArea.value = mainTextArea.value.replace(/ *\{.*?\} */g, ' ');
    }

    //duration 구하기(재생시간)
    // myAudio = document.getElementById("myAudio");

    // myAudio.onloadedmetadata = ()=> {
    //     console.log(myAudio.duration)
    //     }

    let audioWavArrayResult;
    let indexWavArray;
    $('#myAudio').on('ended', function () {
        if ($("[name=wavCheckBox]").prop("checked") == true && $("[name=sentenceDownloadCheckBox]").prop("checked")==true && $("#wavCheckBlock").is(":visible") && replayPrevent || audioWavArrayResult.length>1){
                if(indexWavArray < audioWavArrayResult.length){
                    $("#myAudio").attr("src",'data:audio/wav;base64,' + audioWavArrayResult[indexWavArray]);
                    $('#myAudio').trigger("play");
                    indexWavArray++;
                }
                else{
                    //정지버튼 숨김, 다시듣기버튼 나타내게
                    $('#stopVoiceCol').hide();
                    $("#listenVoice").prop('disabled', false);

                    //음성생성 버튼 다시 보이게
                    if ($('#makeSoundCol').is(":visible")) {

                    } else {
                        $('#listenVoiceCol').show();
                        //  $("#listenVoice").prop('disabled', false);
                    }

                    $("#tempStop").prop('disabled', false);
                }
        }else{
            let txtEntry = document.getElementById("textEntry").value;
        //backgroundAudio.pause();
        //backgroundAudio.currentTime = 0; // Reset time

        //정지버튼 숨김, 다시듣기버튼 나타내게
        $('#stopVoiceCol').hide();
        $("#listenVoice").prop('disabled', false);

        //음성생성 버튼 다시 보이게
        if ($('#makeSoundCol').is(":visible")) {

        } else {
            $('#listenVoiceCol').show();
            //  $("#listenVoice").prop('disabled', false);
        }

        if (!"") {
            if (txtEntry.length >= 80) {
                var title = "Confirm";
                var text = "Listening can only be 80 characters.\nThere is no text limit for MP3 download.";
                Swal.fire(title, text, 'warning');
                txtEntry = "";
            }
        }

        $("#tempStop").prop('disabled', false);

    } 
    });
    $('#myAudio').on('playing', function () {
        $('#listenVoiceCol').hide();
        $('#stopVoiceCol').show();


        $("#tempStop").prop('disabled', true);
        //배경음을 안나게 하고 싶으면 아래 내용만 주석처리하면 된다.
        //backgroundAudio.play();
    });
    $('#myAudio').on('pause', function () {
        $("#tempStop").prop('disabled', false);
        //backgroundAudio.pause();
    });


    // //MP3다운로드 by wrkholic84 2020.03.12. 삭제됨(2021-05-19)



    function forMembersPopup(){
        let htmlValue;
        ""
            htmlValue = '멤버십 회원만 사용할 수 있는 기능입니다.' + '</br>'+
                    '<a href="https://www.wemakevoice.com/priceMp3down">' + '멤버십 종류' + '</a>' + '를 확인하여 다양한 기능을 이용하세요.';
        ""
        Swal.fire({
                    title: "Membership only",
                    icon: 'info',
                    html: htmlValue,
                    confirmButtonText: "Confirm",
        })
    }

    //음성재생 음성생성 생성하기 기능 (미리듣기 / 방송하기)
    function speakSound() {
        //음란문자 폭력문자 제거
        // if (!fnCheckForRestrictedWords()) {
        //     Swal.fire({ text: '[경고] 제한된 내용이 들어가있습니다.', icon: 'warning', confirmButtonText: "확인" }).then((result) => {
        //         $("#listenVoice").prop('disabled', false);
        //         $('#makeSoundCol').show();
        //         $('.afterCreatSoundCol').hide();
        //         $('#listenVoiceCol').hide();
        //     });
        //     return false;
        // }

        if ("false"=="false") {
            forMembersPopup();
            return false;
        }

        


        //내용 입력확인
        if ($('#textEntry').val() == "") {
            var popText = "Please enter the text that you want to make.";
            Swal.fire({ text: popText, icon: 'warning', confirmButtonText: "Confirm" })
            $("#listenVoice").prop('disabled', false);
            $('#makeSoundCol').show();
            $("#wavFileCheckBox").prop('disabled', false);
            $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
            $("#selectDivide").prop('disabled', false);
            $('.afterCreatSoundCol').hide();
            $('#listenVoiceCol').hide();
            return false;
        }

        //음성듣기 버튼 비활성화
        $("#listenVoice").prop('disabled', true);

        //텍스트 내용
        let txtEntry = document.getElementById("textEntry").value;

        //크레딧에 사용될 글자수 계산(실질적인 글자수 측정) 
        let countText = txtEntry.replace(/\{.*?\}/g, '');

        //특수문자 제거
        if (regExp.test(txtEntry)) {
            txtEntry = txtEntry.replace(regExp, "");
        }

        //비회원일시 글자수가 80자 넘으면 80자로 짜르기 
        if (!"") {
            if (txtEntry.length >= 80) {
                txtEntry = txtEntry.substr(0, 80);
            } else {
                txtEntry = txtEntry;
            }
        }

        //파일 자동 다운로드 비회원 설정
        if ($("[name=autoFileDownloadCheckBox]").prop("checked") && "false" =="false") {
            $("[name=autoFileDownloadCheckBox]").prop("checked", false);
            localStorage.setItem("autoFileDownload", $("[name=autoFileDownloadCheckBox]").prop("checked"));
        }

        //문장별 다운로드 비회원 설정
        if ($("[name=sentenceDownloadCheckBox]").prop("checked") && "false" =="false") {
            $("[name=sentenceDownloadCheckBox]").prop("checked", false);
            localStorage.setItem("sentenceDownload", $("[name=sentenceDownloadCheckBox]").prop("checked"));
        }

        var value = txtEntry;
        let fileFormat;

        if ($("[name=wavCheckBox]").prop("checked")) {
            fileFormat = "wav"
        } else {
            fileFormat = "mp3"
        }

        //부분 일시정지 삽입하기
        value = value.replace(/\{/g, '<break time="');
        value = value.replace(/\}/g, 's"/>');

        var selectBox = document.getElementById("selectBox");
        var language = selectBox.options[selectBox.selectedIndex].value;
        var selectedVoice = $("#selectBox option:selected").text();

        let mainLanguage = language; //스타일이 있을시 스타일의 모 언어로 체크한다. (보이스라우트를 위함)
        //음성 스타일 존재시 해당 스타일로 재생
        if ($("#selectStyle").val()) {
            language = $("#selectStyle").val(); //변환되는 언어는 스타일의 언어로 한다.
        }

        let zipDown;
        if ($("[name=sentenceDownloadCheckBox]").prop("checked") && $("#selectDivide").val()) {
            zipDown= $("#selectDivide").val(); //변환되는 언어는 스타일의 언어로 한다.
        }else{
            zipDown= "";
        }

        //속도,톤,볼륨
        let speedText = $("#speedRange").val();
        speedText = parseInt(speedText)+10;
        let pitchText = $("#pitchRange").val();
        let volumeText = $("#volumeRange").val();

        $.ajax({
            type: 'POST',
            url: '/voice',
            dataType: 'json',
            data:
            {
                text: value, lang: language, type: "stream", voice: selectedVoice,
                speed: speedText, pitch: pitchText, volume:volumeText, credit: listenCredit, countText: countText.length,
                format: fileFormat, mainLang: mainLanguage, zipDown: zipDown,
                freeVoice: false
            },
            beforeSend: function () {
                $('#loader').show();
                $("#listenVoice").prop('disabled', true);
            },
            complete: function () {
                $('#loader').hide();
                $("#listenVoice").prop('disabled', false);
            },
            success: function (result) {
                if (result) {

                    if (result.result == "notMembership") {
                        forMembersPopup();
                            return;
                        }
                    if (result.result == "notenoughcredit") {
                        $('#makeSoundCol').show();
                        $("#wavFileCheckBox").prop('disabled', false);
                        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
                        $("#selectDivide").prop('disabled', false);
                        $('.afterCreatSoundCol').hide();
                        $('#listenVoiceCol').hide();
                        Swal.fire({ text: "limit reached. Please check our pricing plans.", icon: 'warning', confirmButtonText: "Confirm" })
                            .then(function (result) {
                                if (result.value) {
                                    ""
                                    location.replace("/priceMp3down");
                                    ""


                                }
                            });
                        $("#listenVoice").prop('disabled', false);
                        $('#makeSoundCol').show();
                        $("#wavFileCheckBox").prop('disabled', false);
                        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
                        $("#selectDivide").prop('disabled', false);
                        $('.afterCreatSoundCol').hide();
                        $('#listenVoiceCol').hide();
                        return;
                    }
                    if (result.result == "overText") {
                        var title = "Confirm";
                        var text = "In this voice, there must be no more than 200 characters in one sentence.";
                        Swal.fire(title, text, 'warning');
                        $("#listenVoice").prop('disabled', false);
                        $('#makeSoundCol').show();
                        $("#wavFileCheckBox").prop('disabled', false);
                        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
                        $("#selectDivide").prop('disabled', false);
                        $('.afterCreatSoundCol').hide();
                        $('#listenVoiceCol').hide();
                        return;
                    }
                    if (result.result == "selectVoice") {
                        var title = "Confirm";
                        var text = "음성을 다시 선택해주세요.";
                        Swal.fire(title, text, 'warning');
                        $("#listenVoice").prop('disabled', false);
                        $('#makeSoundCol').show();
                        $("#wavFileCheckBox").prop('disabled', false);
                        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
                        $("#selectDivide").prop('disabled', false);
                        $('.afterCreatSoundCol').hide();
                        $('#listenVoiceCol').hide();
                        return;
                    }

                    if (result.result == "notenoughcreditglobal") {
                        $('#makeSoundCol').show();
                        $("#wavFileCheckBox").prop('disabled', false);
                        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
                        $("#selectDivide").prop('disabled', false);
                        $('.afterCreatSoundCol').hide();
                        $('#listenVoiceCol').hide();
                        Swal.fire({ text: "limit reached. Please check our pricing plans.", icon: 'warning', confirmButtonText: "Confirm" })
                            .then(function (result) {
                                if (result.value) {
                                    location.replace("/priceMp3down/global");
                                }
                            });
                        $("#listenVoice").prop('disabled', false);
                        $('#makeSoundCol').show();
                        $("#wavFileCheckBox").prop('disabled', false);
                        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
                        $("#selectDivide").prop('disabled', false);
                        $('.afterCreatSoundCol').hide();
                        $('#listenVoiceCol').hide();
                        return;
                    }

                    if (result.result == "testCountOver") {
                        $('#makeSoundCol').show();
                        $("#wavFileCheckBox").prop('disabled', false);
                        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
                        $("#selectDivide").prop('disabled', false);
                        $('.afterCreatSoundCol').hide();
                        $('#listenVoiceCol').hide();
                        var title = "Confirm";
                        var text = "Non-member conversion times exceeded.";
                        Swal.fire(title, text, 'warning').then(function (result) {
                            if (result.value) {
                                ""
                                location.replace("/users/registerTerms");
                                ""
                            }
                        });
                        $("#listenVoice").prop('disabled', false);
                        $('#makeSoundCol').show();
                        $("#wavFileCheckBox").prop('disabled', false);
                        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
                        $("#selectDivide").prop('disabled', false);
                        $('.afterCreatSoundCol').hide();
                        $('#listenVoiceCol').hide();
                        return;
                    }
                    if (result.result == "contentError") {
                        var title = "Confirm";
                        var text = "Please check the contents again.";
                        Swal.fire(title, text, 'warning');
                        $("#listenVoice").prop('disabled', false);
                        $('#makeSoundCol').show();
                        $("#wavFileCheckBox").prop('disabled', false);
                        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
                        $("#selectDivide").prop('disabled', false);
                        $('.afterCreatSoundCol').hide();
                        $('#listenVoiceCol').hide();
                        return;
                    }
                    if (result.result == "oneDayPassEnds") {
                        var title =  "Confirm";
                        var text = "The daily ticket has ended.";
                        Swal.fire(title, text, 'warning').then(function (result) {
                            if (result.value) {
                                location.replace("/");
                            }
                        });
                        $("#listenVoice").prop('disabled', false);
                        $('#makeSoundCol').show();
                        $("#wavFileCheckBox").prop('disabled', false);
                        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
                        $("#selectDivide").prop('disabled', false);
                        $('.afterCreatSoundCol').hide();
                        $('#listenVoiceCol').hide();
                        return;
                    }
                    if (result.result == "oneDayPassTextLimit") {
                        var title =  "Confirm";
                        var text = "You have exceeded the remaining characters.";
                        Swal.fire(title, text, 'warning');
                        $("#listenVoice").prop('disabled', false);
                        $('#makeSoundCol').show();
                        $("#wavFileCheckBox").prop('disabled', false);
                        $("#selectDivide").prop('disabled', false);
                        $('.afterCreatSoundCol').hide();
                        $('#listenVoiceCol').hide();
                        return;
                    }
                    if (result.result == "oneMonthPassEnds") {
                        var title = "Confirm";
                        var text = "The membership has ended.";
                        Swal.fire(title, text, 'warning').then(function (result) {
                            if (result.value) {
                                location.replace("/");
                            }
                        });
                        $("#listenVoice").prop('disabled', false);
                        $('#makeSoundCol').show();  //음성생성
                        $("#wavFileCheckBox").prop('disabled', false);
                        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
                        $("#selectDivide").prop('disabled', false);
                        $('.afterCreatSoundCol').hide();
                        $('#listenVoiceCol').hide();
                        return;
                    }
                    if (result.result == "oneMonthPassTextCountEnds") {
                        let htmlValue;
                        ""
                            htmlValue = "All remaining characters are exhausted."+'</br>'+
                        '<a href="https://www.wemakevoice.com/users/paymentHistory">'+"추가 글자수"+'</a>를 구매하여 음성을 생성하세요.';
                        ""
                        
                        Swal.fire({
                        title:  "No remaining characters.",
                        icon: 'info',
                        html: htmlValue,
                        confirmButtonText: "확인",
                        });


                        $("#listenVoice").prop('disabled', false);
                        $('#makeSoundCol').show();
                        $("#wavFileCheckBox").prop('disabled', false);
                        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
                        $("#selectDivide").prop('disabled', false);
                        $('.afterCreatSoundCol').hide();
                        $('#listenVoiceCol').hide();
                        return;
                    }

                    if(result.result =="onlyMembershipCanUse"){
                        let title = "Membership User";
                        let text = "Only for membership";
                        Swal.fire(title, text, 'info');
                        $("#listenVoice").prop('disabled', false);
                        $('#makeSoundCol').show();
                        $("#wavFileCheckBox").prop('disabled', false);
                        $("#sentenceSliceDownloadCheckBox").prop('disabled', false);
                        $("#selectDivide").prop('disabled', false);
                        $('.afterCreatSoundCol').hide();
                        $('#listenVoiceCol').hide();
                        return;
                    }                    



                    if (result.provider != "R") {
                        // var audioSrc = result.result;
                        var audioSrc = 'data:audio/mp3;base64,' + result.result;
                        $('#downloadText').html('MP3 download');
                        audioWavArrayResult="";
                    } else {
                        if(result.bm && $("[name=sentenceDownloadCheckBox]").prop("checked")==true) {
                            var audioSrc='data:audio/wav;base64,' + result.result[0];
                            audioWavArrayResult = result.result;
                            indexWavArray = 1;
                            replayPrevent =true;
                            if(fileFormat == "wav"){
                                $('#downloadText').html('WAV download');
                            }else{
                                $('#downloadText').html('MP3 download');
                            }
                        }
                        else if (fileFormat == "wav" && $("[name=sentenceDownloadCheckBox]").prop("checked")==true ) {
                            var audioSrc='data:audio/wav;base64,' + result.result[0];
                            audioWavArrayResult = result.result;
                            indexWavArray = 1;
                            replayPrevent =true;
                            $('#downloadText').html('WAV download');
                        } else if(fileFormat == "wav" && $("[name=sentenceDownloadCheckBox]").prop("checked")==false ) {
                            var audioSrc = 'data:audio/wav;base64,' + result.result;
                            $('#downloadText').html('WAV download');
                            audioWavArrayResult="";
                        } else {
                            var audioSrc = 'data:audio/mp3;base64,' + result.result;
                            $('#downloadText').html('MP3 download');
                            audioWavArrayResult="";
                        }
                    }

                    $('#makeSoundCol').hide();
                    // $('#wavCheckBlock').hide();
                    $("#wavFileCheckBox").prop('disabled', true);
                    $("#sentenceSliceDownloadCheckBox").prop('disabled', true);
                    $("#selectDivide").prop('disabled', true);
                    $('.afterCreatSoundCol').show();

                    //압축파일 데이터 다운
                    zipData = result.zipData;

                    //남은 사용가능 글자수 가져오기
                    ""

                    //다시 들을 수 있도록 오디오에 저장
                    $("#myAudio").attr("src", audioSrc);

                    //오디오 태그에서 천천히 플래이하기
                    //  document.getElementById("myAudio").playbackRate=0.5;

                    // var link = document.createElement("a");
                    // // If you don't know the name or want to use
                    // // the webserver default set name = ''
                    // link.setAttribute('download', "abcd.mp3");
                    // link.href = audioSrc;
                    // document.body.appendChild(link);
                    // link.click();
                    // link.remove();


                    $('#myAudio').trigger("play");
                    $('#textEntry').focus();



                    //파일 자동 다운로드 설정
                    if ($("[name=autoFileDownloadCheckBox]").prop("checked")) {
                        downloadSound();
                    }

                }
            }
        });
    }

    //음성중지하기
    function stopSound() {
        $('#myAudio').trigger("pause");
        $('#myAudio')[0].currentTime = 0;
        $('#listenVoiceCol').show();
        $('#stopVoiceCol').hide();
    }

    //텍스트 선택한것 가져오기
    function getSelectionText() {
        if (window.getSelection) {
            try {
                let ta = $('textarea').get(0);
                return ta.value.substring(ta.selectionStart, ta.selectionEnd);
            } catch (e) {
            }
        }
        // For IE
        if (document.selection && document.selection.type != "Control") {
            return document.selection.createRange().text;
        }
    }


    $('#dragAudio').on('ended', function () {
        $("#dragListenIcon").removeClass('fa-volume-up');
        $("#dragListenIcon").addClass('fa-volume-mute');
    });

    //드래그 미리듣기
    function dragListen() {
        if (firstMember.includes("")) {
        }
        else if ("") {
        }
        else if (!"" || !"") {
            let title = "Membership User";
            let text = "Only for membership";
            Swal.fire(title, text, 'info');
            return;
        }




        var dragAudio = document.getElementById('dragAudio');

        if (dragAudio.duration > 0 && !dragAudio.paused) {
            dragAudio.pause(); // Stop playing
            dragAudio.currentTime = 0; // Reset time
            $("#dragListenIcon").removeClass('fa-volume-up');
            $("#dragListenIcon").addClass('fa-volume-mute');
        }
        else {
            let dragMent = getSelectionText();
            let countText = dragMent;
            if (dragMent == "") {
                Swal.fire({
                    text: "Drag some part you want to listen. You can hear up to 80 characters.",
                    icon: 'warning',
                    confirmButtonText: "확인"
                })
                return false;
            }

            //글자수가 80자 넘으면 80자로 짜르기 
            if (dragMent.length >= 80) {
                dragMent = dragMent.substr(0, 80);
            } else {
                dragMent = dragMent;
            }
            //특수문자 제거
            if (regExp.test(dragMent)) {
                dragMent = dragMent.replace(regExp, "");
            }
            //일시정지 삽입하기
            dragMent = dragMent.replace(/\{/g, '<break time="');
            dragMent = dragMent.replace(/\}/g, 's"/>');

            //음성 가져오기
            let language = $("#selectBox option:selected").val();
            let selectedVoice = $("#selectBox option:selected").text();
            let mainLanguage = language; //스타일이 있을시 스타일의 모 언어로 체크한다. (보이스라우트를 위함)
            //음성 스타일 존재시 해당 스타일로 재생
            if ($("#selectStyle").val()) {
                language = $("#selectStyle").val(); //변환되는 언어는 스타일의 언어로 한다.
            }

            //속도 & 톤조절
            let speedText = $("#speedRange").val();
            speedText = parseInt(speedText)+10;
            let pitchText = $("#pitchRange").val();
            let volumeText = $("#volumeRange").val();

            $.ajax({
                type: 'POST',
                url: '/voice',
                dataType: 'json',
                data: { text: dragMent, countText: countText.length, lang: language, type: "MP3_DRAG", voice: selectedVoice, speed: speedText, pitch: pitchText, volume: volumeText, mainLang: mainLanguage, zipDown: $("[name=sentenceDownloadCheckBox]").prop("checked"),freeVoice: false },
                success: function (result) {
                    if (result) {
                        let audioSrc;
                        audioSrc = 'data:audio/mp3;base64,' + result.result;
                        if (result.result == "overCharacter") {
                            Swal.fire({
                                text: "You can listen to up to 80 characters.",
                                icon: 'warning',
                                confirmButtonText: "확인"
                            })
                            return;
                        } else if (result.result == "notMembership") {
                            Swal.fire({
                                text: "Only for membership",
                                icon: 'warning',
                                confirmButtonText: "확인"
                            })
                            return;
                        } else if (result.result == "draglistenLimit") {
                            Swal.fire({
                                title:"Over the limit", 
                                text: "Today&#39;s partial listening limit has been exceeded. It will be charged again tomorrow.",
                                icon: 'warning',
                                confirmButtonText: "확인"
                            })
                            return;
                        }


                        //버튼에 아이콘 표시
                        $("#dragListenIcon").removeClass('fa-volume-mute');
                        $("#dragListenIcon").addClass('fa-volume-up');

                        //다시 들을 수 있도록 오디오에 저장
                        $("#dragAudio").attr("src", audioSrc);
                        $("#dragAudio").trigger("play");

                        if (result.balanceDragListen || result.balanceDragListen == 0) {
                            $('#balanceDragListen').html(" |  Part Play : " + numberWithCommas(result.balanceDragListen)+"times");
                        }

                    }
                }
            });


        }
    }



    //MP3다운로드 by wrkholic84 2020.03.12. 삭제됨(2021-05-19)

    //임시 mp3다운을 위해 어린이 음성
    function download(url, filename) {
        fetch(url).then(function (t) {
            return t.blob().then((b) => {
                var a = document.createElement("a");
                a.href = URL.createObjectURL(b);
                a.setAttribute("download", filename);
                a.click();
            }
            );
        });
    }




    //선택글자수 자르기
    function cutTextLength() {
        var input = document.getElementById("textEntry");
        if (window.getSelection) {
            try {
                let ta = $('textarea').get(0);
                if (ta.selectionEnd - ta.selectionStart > 80) {
                    input.setSelectionRange(ta.selectionStart, ta.selectionStart + 80);
                    input.focus();
                } else {
                }
            } catch (e) {
            }
        }
        // For IE
        if (document.selection && document.selection.type != "Control") {
            return document.selection.createRange().text;
        }
    }


    //파일명 내용으로 저장하기 기능 20200721 
    function fileNameSetting() {
        var txtEntry2 = document.getElementById("textEntry").value;
        if (regExp.test(txtEntry2)) {
            txtEntry2 = txtEntry2.replace(regExp, "");
        }
        txtEntry2 = txtEntry2.replace(/\?|\!|\,|\.|/g, "");
        if (txtEntry2.length < 15) {
            return txtEntry2;
        } else{
            return txtEntry2.substr(0, 15)
        }
    }


    // MP3 모달팝업 
    const modal = document.querySelector("#my-modal3");
    // window.addEventListener("click", outsideClick);
    // Open
    function openModal() {
        modal.style.display = "block";
    }
    // Close
    function closeModal() {
        modal.style.display = "none";
        if ($("[name=popupCheck3]").prop("checked") == true) {
            localStorage.setItem('popupCheck3', true);


        };

    }
    // Close If Outside Click
    function outsideClick(e) {
        if (e.target == modal) {
            modal.style.display = "none";
        }
    }



//range에 글씨 표시하기

const rangeLabel = document.getElementById("pitchLabel");
const rangeInput = rangeLabel.children[0];
const thumbWidth = 6;
rangeLabel.insertAdjacentHTML("beforeend", `<span class="bubble"></span>`);
const rangeBubble = rangeLabel.children[1];


const speedLabel = document.getElementById("speedLabel");
const speedInput = speedLabel.children[0];
speedLabel.insertAdjacentHTML("beforeend", `<span class="bubble"></span>`);
const speedBubble = speedLabel.children[1];

const volumeLabel = document.getElementById("volumeLabel");
const volumeInput = volumeLabel.children[0];
volumeLabel.insertAdjacentHTML("beforeend", `<span class="bubble"></span>`);
const volumeBubble = volumeLabel.children[1];



positionBubble(rangeBubble, rangeInput);
positionBubble(speedBubble, speedInput);
positionBubble(volumeBubble, volumeInput);

function positionBubble(bubbleElement, anchorElement) {
  const { min, max, value, offsetWidth } = anchorElement;
  const total = Number(max) - Number(min);
  const perc = (Number(value) - Number(min)) / total;
  const offset = thumbWidth / 2 - thumbWidth * perc;

  bubbleElement.style.left = `calc(${perc * 100}% + ${offset}px)`;
  bubbleElement.textContent = value;
}

rangeInput.addEventListener("input", (e)=>{
     positionBubble(rangeBubble, e.target);
});

speedInput.addEventListener("input", (e)=>{
     positionBubble(speedBubble, e.target);
});
volumeInput.addEventListener("input", (e)=>{
     positionBubble(volumeBubble, e.target);
});


    //부드럽게 페이지가 내려오는 부분 (에니매이션)
    // $(document).on('click', '#gnb a', function (event) {
    //             var targetHash = $(this).attr('href');
    //             var headerHeight = $('header').outerHeight();
    //             event.preventDefault();
    //             $("html,body").animate({ scrollTop: $(targetHash).offset().top - headerHeight }, 2000)
    //         });

</script>
</body>

</html>
            <!-- // 처음 제공되는 무료 변환 글자는 반드시 출처를 표시해주세요. [출처 : 본 음성은 위메이크보이스에서 제작되었습니다. www.wemakevoice.com]  -->

            <!-- Copyright (c) 2021 by Brad Bodine (https://codepen.io/bbodine1/pen/novBm)
Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. -->